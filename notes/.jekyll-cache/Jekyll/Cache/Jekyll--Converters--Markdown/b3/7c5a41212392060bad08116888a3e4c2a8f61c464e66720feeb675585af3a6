I"§<h1 id="the-class">The Class</h1>

<p><a href="https://course.ccs.neu.edu/cs2510/">Class Website</a></p>

<p>Fundamentals of Computer Science 1: Correct program behavior</p>

<p>Fundamentals of Computer Science 2: Having your code be scalable/maintainable/efficient</p>

<p>2% late per hour per submission for homework assignments</p>

<p>Read lecture notes before coming to class</p>

<p>Code Review: Taking your code and explain it to somebody else</p>
<ul>
  <li>Happens towards the end of the semester</li>
</ul>

<h1 id="introduction-to-java">Introduction to Java</h1>

<p>Data. We first started with <em>atomic data</em>.</p>

<p>For example:</p>

<div class="language-scheme highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;; a PosReal number representing the price of a coffee</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">coffee-price</span> <span class="mf">3.5</span><span class="p">)</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">fancy-coffee</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">coffee-price</span> <span class="mf">1.5</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="nv">extra-fancy-cofee</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">coffee-price</span> <span class="s">"2 dollars"</span><span class="p">))</span> 
<span class="c1">; This won't work. Can't add number to integer.</span>

<span class="c1">;; An Auto is a (make-auto Integar Integar String PosReal)</span>
<span class="p">(</span><span class="nf">define-struct</span> <span class="nv">auto</span> <span class="p">(</span><span class="nf">x</span> <span class="nv">y</span> <span class="nv">color</span> <span class="nv">speed</span><span class="p">))</span>
</code></pre></div></div>
<p>DrRacket doesnâ€™t know that this is wrong until you run it. <code class="language-plaintext highlighter-rouge">Auto</code> is an example
of compound dataâ€“meaning it holds multiple values.</p>

<p>Java is infix notation.</p>

<p>This code would not have <em>compiled</em>.</p>

<p>Java is a <strong>strongly typed language</strong> (data is checked at compile time). And ISL
is <strong>dynamically typed</strong> (data is checked at run time).</p>

<h2 id="java-variables">Java Variables</h2>
<p>In Java there are two types of numbers: Integers and Doubles. (There are more,
but we only care about these 2 for now.)</p>

<p>Also, you canâ€™t have dashes in Javaâ€™s namesâ€“instead use camelCase.
Example in Java:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Primative Types</span>
<span class="kt">int</span> <span class="n">distance</span> <span class="o">=</span> <span class="mi">3</span><span class="o">;</span>
<span class="kt">double</span> <span class="n">coffeePrice</span> <span class="o">=</span> <span class="mf">3.5</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">hi</span> <span class="o">=</span> <span class="s">"hello"</span><span class="o">;</span>
<span class="kt">char</span> <span class="n">a</span> <span class="o">=</span> <span class="sc">'a'</span><span class="o">;</span>
<span class="kt">boolean</span> <span class="n">isSunny</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
</code></pre></div></div>

<p>Why is String capitalized? Because it is not a primitive data type.</p>

<h2 id="compound-data-in-java">Compound Data in Java</h2>
<h3 id="example---auto">Example - Auto</h3>

<div style="width: 100%" class="ui rounded images">
<img class="ui image" src="./cs2510/autodiag.svg" />
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Auto</span> <span class="o">{</span>
    <span class="c1">//int x;</span>
    <span class="c1">//int y;</span>
    <span class="nc">Location</span> <span class="n">loc</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">color</span><span class="o">;</span>
    <span class="kt">double</span> <span class="n">speed</span><span class="o">;</span>
    <span class="c1">//Auto(int x, int y, String color, double speed){ // This is a constructor</span>
    <span class="nc">Auto</span><span class="o">(</span><span class="nc">Location</span> <span class="n">loc</span><span class="o">,</span> <span class="nc">String</span> <span class="n">color</span><span class="o">,</span> <span class="kt">double</span> <span class="n">speed</span><span class="o">){</span>
        <span class="c1">//this.x = x; // _this_ means the one in the class</span>
        <span class="c1">//this.y = y;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">loc</span> <span class="o">=</span> <span class="n">loc</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">speed</span> <span class="o">=</span> <span class="n">speed</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">Location</span><span class="o">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">y</span><span class="o">;</span>
    <span class="nc">Location</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">ExamplesAuto</span><span class="o">{</span>
    <span class="nc">Location</span> <span class="nc">Loc34</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Location</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">);</span>
    <span class="nc">Auto</span> <span class="n">car1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Auto</span><span class="o">(</span><span class="nc">Loc34</span><span class="o">,</span> <span class="s">"red"</span><span class="o">,</span> <span class="mf">50.0</span><span class="o">);</span>
    <span class="nc">ExamplesAuto</span><span class="o">(){}</span>
<span class="o">}</span>

</code></pre></div></div>

<h1 id="unions">Unions</h1>

<h3 id="example---spaceships">Example - Spaceships</h3>

<div style="width: 100%" class="ui rounded images">
<img class="ui image" src="./cs2510/space-ship-example.png" />
</div>

<p><strong>Racket</strong>:</p>
<div class="language-scheme highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nf">define-struct</span> <span class="nv">invader</span> <span class="p">(</span><span class="nf">loc</span> <span class="nv">color</span> <span class="nv">bullets</span> <span class="nv">size</span><span class="p">))</span>
<span class="c1">;; An Invader is a (make-invader Posn String PosInt PosInt</span>

<span class="p">(</span><span class="k">define</span> <span class="nv">invader1</span> <span class="p">(</span><span class="nf">make-invader</span> <span class="p">(</span><span class="nf">make-posn</span> <span class="mi">60</span> <span class="mi">120</span><span class="p">)</span> <span class="s">"green"</span> <span class="mi">30</span> <span class="mi">3</span><span class="p">))</span>

<span class="o">#</span><span class="c1">;(define (invader-temp1 inv)</span>
    <span class="p">(</span><span class="nf">posn-temp1</span> <span class="p">(</span><span class="nf">invader-loc</span> <span class="nv">inv</span><span class="p">))</span>
    <span class="p">(</span><span class="nf">invader-color</span> <span class="nv">inv</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">invader-bullets</span> <span class="nv">inv</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">invader-size</span> <span class="nv">inv</span><span class="p">))</span>

<span class="p">(</span><span class="nf">define-struct</span> <span class="nv">ship</span> <span class="p">(</span><span class="nf">loc</span> <span class="nv">color</span> <span class="nv">speed</span><span class="p">))</span>
<span class="c1">;; A Shapeship is a (make-ship Posn String PosInt)</span>
<span class="c1">;; interp.: loc is a position on the Cartesian plane</span>
<span class="c1">;; speed is measured in miles/hour</span>
    

<span class="c1">;; A GamePiece is one of:</span>
<span class="c1">;; - Spaceship</span>
<span class="c1">;; - Invader</span>

</code></pre></div></div>

<p>NOTE: The Union data type is only in comments in DrRacket. In Java, however,
this is not in comments.</p>

<p><strong>Java</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">IGamePiece</span> <span class="o">{}</span>

<span class="c1">// Represents an Invader in the game</span>
<span class="kd">class</span> <span class="nc">Spaceship</span> <span class="kd">implements</span> <span class="nc">IGamePiece</span> <span class="o">{</span>
    <span class="nc">Location</span> <span class="n">loc</span>
    <span class="nc">String</span> <span class="n">color</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">speed</span><span class="o">;</span>
    <span class="nc">Spaceship</span><span class="o">(</span><span class="nc">Location</span> <span class="n">loc</span><span class="o">,</span> <span class="nc">String</span> <span class="n">color</span><span class="o">,</span> <span class="kt">int</span> <span class="n">speed</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">loc</span> <span class="o">=</span> <span class="n">loc</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">speed</span> <span class="o">=</span> <span class="n">speed</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Represents an Invader in the game</span>
<span class="kd">class</span> <span class="nc">Invader</span> <span class="kd">implements</span> <span class="nc">IGamePiece</span> <span class="o">{</span>
    <span class="nc">Location</span> <span class="n">loc</span>
    <span class="nc">String</span> <span class="n">color</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">bullets</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
    <span class="nc">Invader</span><span class="o">(</span><span class="nc">Location</span> <span class="n">loc</span><span class="o">,</span> <span class="nc">String</span> <span class="n">color</span><span class="o">,</span> <span class="kt">int</span> <span class="n">bullets</span><span class="o">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">loc</span> <span class="o">=</span> <span class="n">loc</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">bullets</span> <span class="o">=</span> <span class="n">bullets</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">size</span> <span class="o">=</span> <span class="n">size</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// A class to represent a location on the Cartesian plane</span>
<span class="kd">class</span> <span class="nc">Location</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">y</span><span class="o">;</span>
    <span class="nc">Location</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Examples</span> <span class="o">{</span>
    <span class="c1">// You cant do the line below because it doesn't know what loc1 is yet</span>
    <span class="c1">//Spaceship ship = new Spaceship(this.loc1, "blue", 55);</span>
    
    <span class="nc">Location</span> <span class="n">loc1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Location</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span> <span class="mi">40</span><span class="o">);</span>
    <span class="nc">Location</span> <span class="n">loc2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Location</span><span class="o">(</span><span class="mi">60</span><span class="o">,</span> <span class="mi">80</span><span class="o">);</span>
    <span class="c1">// Represents two IGamePieces: Spaceships and Invaders</span>
    <span class="nc">IGamePiece</span> <span class="n">ship</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Spaceship</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">loc1</span><span class="o">,</span> <span class="s">"blue"</span><span class="o">,</span> <span class="mi">55</span><span class="o">);</span>
    <span class="nc">IGamePiece</span> <span class="n">invader1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Invader</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">loc2</span><span class="o">,</span> <span class="s">"pink"</span><span class="o">,</span> <span class="mi">30</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
    
    <span class="c1">// You can still do this, but it's bad practice</span>
    <span class="c1">//Spaceship ship = new Spaceship(new Location(30, 40), "blue", 55); </span>
    
<span class="o">}</span>
    
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">IGamePiece</code> is the type at compile time</p>

<p><code class="language-plaintext highlighter-rouge">Spaceship/Invader</code> is the type at run-time</p>

<p>Use the <code class="language-plaintext highlighter-rouge">this</code> keyword anytime you canâ€“it removes ambiguity.</p>

<p>In Java, Unions are <strong>interfaces</strong>. The reason we would want to declare a
variable by itâ€™s Union is so it can be that typeâ€“which means that we can use
more general operations.</p>

<h3 id="example---ancestor-tree">Example - Ancestor Tree</h3>

<p><strong>Racket</strong>:</p>
<div class="language-racket highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;; A Person is a (make-person String Person Person)</span>
<span class="p">(</span><span class="k">define-struct</span> <span class="nv">person</span> <span class="p">(</span><span class="nf">name</span> <span class="nv">mom</span> <span class="nv">dad</span><span class="p">))</span>

<span class="p">(</span><span class="k">define</span> <span class="nv">alice</span> <span class="p">(</span><span class="nf">make-person</span> <span class="s">"Alice"</span> 
                <span class="p">(</span><span class="nf">make-person</span> <span class="s">"Sally"</span>
                    <span class="p">(</span><span class="nf">make-person</span> <span class="s">"Abby"</span>
                        <span class="o">...</span>
<span class="c1">; this issue with this definition is that you cannot stop--you need a base case</span>
<span class="c1">; for referential data</span>

<span class="c1">;; An AT is one of:</span>
<span class="c1">;; - #false</span>
<span class="c1">;; - (make-person String AT AT)</span>
</code></pre></div></div>

<div style="width: 100%" class="ui rounded images">
<img class="ui image" src="./cs2510/fam-tree-ex-lec-2.png" />
</div>

<p><strong>Java</strong>:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">IAT</span><span class="o">{}</span>

<span class="c1">// Class to represent an unknown in an ancestor tree</span>
<span class="kd">class</span> <span class="nc">Unknown</span> <span class="kd">implements</span> <span class="no">IAT</span> <span class="o">{</span>
    <span class="nc">Unknown</span><span class="o">()</span> <span class="o">{}</span>
<span class="o">}</span>

<span class="c1">// Class to represent a person in an ancestor tree</span>
<span class="kd">class</span> <span class="nc">Person</span> <span class="kd">implements</span> <span class="no">IAT</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">yob</span>
    <span class="no">IAT</span> <span class="n">mom</span><span class="o">;</span>
    <span class="no">IAT</span> <span class="n">dad</span><span class="o">;</span>
    
    <span class="nc">Person</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">yob</span><span class="o">,</span> <span class="no">IAT</span> <span class="n">mom</span><span class="o">,</span> <span class="no">IAT</span> <span class="n">dad</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">yob</span> <span class="o">=</span> <span class="n">yob</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">mom</span> <span class="o">=</span> <span class="n">mom</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">dad</span> <span class="o">=</span> <span class="n">dad</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h1 id="methods">Methods</h1>

<p><strong>Recall the design recipe for functions:</strong></p>

<ul>
  <li>Signature</li>
  <li>Purpose Statement</li>
  <li>Examples/Tests</li>
  <li>Code</li>
  <li>Run</li>
</ul>

<p>Consider the DrRacket code:</p>

<div class="language-scheme highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;; Spaceship Integer -&gt; Integer</span>
<span class="c1">;; produces a reduced speed for the given spaceship based on a given percentage</span>
<span class="p">(</span><span class="nf">check-expect</span> <span class="p">(</span><span class="nf">reduced-speed</span> <span class="nv">ship1</span> <span class="mi">20</span><span class="p">)</span> <span class="mi">80</span><span class="p">)</span> <span class="c1">; ship1 has a speed of 100</span>
<span class="p">(</span><span class="nf">check-expect</span> <span class="p">(</span><span class="nf">reduced-speed</span> <span class="nv">ship2</span> <span class="mi">50</span><span class="p">)</span> <span class="mi">25</span><span class="p">)</span> <span class="c1">; ship2 has a speed of 25 </span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">reduced-speed</span> <span class="nv">ship</span> <span class="nv">rate</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">-</span> <span class="p">(</span><span class="nf">ship-speed</span> <span class="nv">ship</span><span class="p">)</span> <span class="p">(</span><span class="nb">/</span> <span class="p">(</span><span class="nb">*</span> <span class="p">(</span><span class="nf">ship-speed</span> <span class="nv">ship</span><span class="p">)</span> <span class="nv">rate</span><span class="p">)</span> <span class="mi">100</span><span class="p">)))</span>
</code></pre></div></div>

<h2 id="template">Template</h2>
<p>What do I have to work with?</p>

<p>You have to do a template for each class</p>
<ul>
  <li>If a method takes in a complex data type, you need another template:
```java
/* everything in template above plus</li>
  <li>fields:</li>
  <li>â€¦</li>
  <li>methods:</li>
  <li>â€¦</li>
  <li>methods for fields:</li>
  <li>â€¦
```</li>
</ul>

<p>In Java, we just list the things:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">tester.*</span><span class="o">;</span>

<span class="kd">interface</span> <span class="nc">IGamePiece</span> <span class="o">{</span>
    <span class="c1">//moves this IGamePiece by the given x and y</span>
    <span class="nc">IGamePiece</span> <span class="nf">move</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">);</span> <span class="c1">//tells the program that every GamePiece has this method</span>
<span class="o">}</span>

<span class="c1">// Represents an Invader in the game</span>
<span class="kd">class</span> <span class="nc">Invader</span> <span class="kd">implements</span> <span class="nc">IGamePiece</span> <span class="o">{</span>
    <span class="nc">Location</span> <span class="n">loc</span>
    <span class="nc">String</span> <span class="n">color</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">bullets</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
    
    <span class="nc">Invader</span><span class="o">(</span><span class="nc">Location</span> <span class="n">loc</span><span class="o">,</span> <span class="nc">String</span> <span class="n">color</span><span class="o">,</span> <span class="kt">int</span> <span class="n">bullets</span><span class="o">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">loc</span> <span class="o">=</span> <span class="n">loc</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">bullets</span> <span class="o">=</span> <span class="n">bullets</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">size</span> <span class="o">=</span> <span class="n">size</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="cm">/* TEMPLATE HERE
    *
    */</span>
    
    <span class="kd">public</span> <span class="nc">IGamePice</span> <span class="nf">move</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Invader</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">loc</span><span class="o">.</span><span class="na">move</span><span class="o">(</span><span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">),</span> <span class="k">this</span><span class="o">.</span><span class="na">color</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">bullets</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">size</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Represents an Spaceship in the game</span>
<span class="kd">class</span> <span class="nc">Spaceship</span> <span class="kd">implements</span> <span class="nc">IGamePiece</span> <span class="o">{</span>
    <span class="nc">Location</span> <span class="n">loc</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">color</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">speed</span><span class="o">;</span> <span class="c1">//in miles per hour</span>
    
    <span class="nc">Spaceship</span><span class="o">(</span><span class="nc">Location</span> <span class="n">loc</span><span class="o">,</span> <span class="nc">String</span> <span class="n">color</span><span class="o">,</span> <span class="kt">int</span> <span class="n">speed</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">loc</span> <span class="o">=</span> <span class="n">loc</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">speed</span> <span class="o">=</span> <span class="n">speed</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="cm">/* fields:
    *   this.local ... Location
    *   this.color ... String
    *   this.speed ... int
    * methods:
    *   this.reducedSpeed(int) ... int
    *   this.move(int, int) ... Spaceship
    * methods for fields:
    *   this.loc.moveLocation(int, int) ... Location
    */</span>
    
    <span class="c1">// produces a reduced speed for this spaceship based on the given percentage</span>
    <span class="kt">int</span> <span class="nf">reducedSpeed</span><span class="o">(</span><span class="kt">int</span> <span class="n">rate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">speed</span> <span class="o">-</span> <span class="o">((</span><span class="k">this</span><span class="o">.</span><span class="na">speed</span> <span class="o">*</span> <span class="n">rate</span><span class="o">)</span> <span class="o">/</span> <span class="mi">100</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="c1">// produces a new spaceship that is shifted from this spaceship by the given x and y</span>
    <span class="nc">Spaceship</span> <span class="nf">move</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Spaceship</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">loc</span><span class="o">.</span><span class="na">move</span><span class="o">(</span><span class="n">x</span><span class="o">,</span><span class="n">y</span><span class="o">),</span> <span class="k">this</span><span class="o">.</span><span class="na">color</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">speed</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Location</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">y</span><span class="o">;</span>
    <span class="nc">Location</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="cm">/* fields
    *   this.x ... int
    *   this.y ... int
    * methods:
    *   this.moveLocation(int, int) ... Location
    */</span>
    
    <span class="c1">//Create a new Location that is shifted from this location by a given x and y</span>
    <span class="nc">Location</span> <span class="nf">move</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Location</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">+</span> <span class="n">x</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">+</span> <span class="n">y</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Examples</span> <span class="o">{</span>
    <span class="nc">Location</span> <span class="n">loc1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Location</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span> <span class="mi">40</span><span class="o">);</span>
    <span class="nc">Location</span> <span class="n">loc2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Location</span><span class="o">(</span><span class="mi">60</span><span class="o">,</span> <span class="mi">80</span><span class="o">);</span>
    
    <span class="nc">Spaceship</span> <span class="n">ship1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Spaceship</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">loc1</span><span class="o">,</span> <span class="s">"blue"</span><span class="o">,</span> <span class="mi">100</span><span class="o">);</span>
    <span class="nc">Spaceship</span> <span class="n">ship1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Spaceship</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">loc2</span><span class="o">,</span> <span class="s">"pink"</span><span class="o">,</span> <span class="mi">30</span><span class="o">);</span>
    
    <span class="c1">//tests for reducing speed</span>
    <span class="kt">boolean</span> <span class="nf">testReducedSpeed</span><span class="o">(</span><span class="nc">Tester</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span> <span class="c1">//these test methods need to start with the word `test`</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">ship1</span><span class="o">.</span><span class="na">reducedSpeed</span><span class="o">(</span><span class="mi">20</span><span class="o">),</span> <span class="mi">80</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
               <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">ship2</span><span class="o">.</span><span class="na">reducedSpeed</span><span class="o">(</span><span class="mi">50</span><span class="o">),</span> <span class="mi">15</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="c1">//tests for move</span>
    <span class="kt">boolean</span> <span class="nf">testMove</span><span class="o">(</span><span class="nc">Tester</span> <span class="n">t</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">ship1</span><span class="o">.</span><span class="na">move</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">),</span> 
               <span class="k">new</span> <span class="nf">Spaceship</span><span class="o">(</span><span class="k">new</span> <span class="nc">Location</span><span class="o">(</span><span class="mi">31</span><span class="o">,</span> <span class="mi">42</span><span class="o">),</span> <span class="s">"blue"</span><span class="o">,</span> <span class="s">"100"</span><span class="o">))</span> <span class="o">&amp;&amp;</span>
               <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">loc1</span><span class="o">.</span><span class="na">moveLocation</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">3</span><span class="o">),</span> <span class="k">new</span> <span class="nc">Location</span><span class="o">(</span><span class="mi">32</span><span class="o">,</span> <span class="mi">43</span><span class="o">));</span>
    <span class="o">}</span>
    
    <span class="c1">//tests for move</span>
    <span class="kt">boolean</span> <span class="nf">testMove</span><span class="o">(</span><span class="nc">Test</span> <span class="n">t</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">ship1</span><span class="o">.</span><span class="na">move</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">),</span>
                            <span class="k">new</span> <span class="nf">Spaceship</span><span class="o">(</span><span class="k">new</span> <span class="nc">Location</span><span class="o">(</span><span class="mi">40</span><span class="o">,</span> <span class="mi">60</span><span class="o">),</span> <span class="s">"blue"</span><span class="o">,</span> <span class="mi">55</span><span class="o">));</span>
    <span class="c1">//notice that we never ask if something is a Spaceship</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="methods-for-unions">Methods for Unions</h2>

<p>We can use the color class by importing the image library.</p>

<p><strong>Incorrect</strong>:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.Color</span>
<span class="kn">import</span> <span class="nn">javalib.worldimages.*</span>

<span class="c1">//...</span>

<span class="c1">//In Spaceship class</span>
<span class="nc">WorldImage</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">CircleImage</span><span class="o">(</span><span class="mi">50</span><span class="o">,</span> <span class="s">"solid"</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">color</span><span class="o">)</span>
<span class="o">}</span>

<span class="c1">// in Examples class</span>
<span class="nc">IGamePiece</span> <span class="n">ship1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Spaceship</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">loc1</span><span class="o">,</span> <span class="nc">Color</span><span class="o">.</span><span class="na">BLUE</span><span class="o">,</span> <span class="mi">55</span><span class="o">);</span>

<span class="k">this</span><span class="o">.</span><span class="na">ship</span><span class="o">.</span><span class="na">draw</span><span class="o">()</span> 
<span class="c1">// this wouldn't work because draw is in the Spaceship class, NOT IGamePice (which ship1 is)</span>
</code></pre></div></div>

<p>So in this case, you would want to put <code class="language-plaintext highlighter-rouge">draw()</code> in the interface (not just the <code class="language-plaintext highlighter-rouge">ship</code> class).</p>

<p><strong>Correct</strong>:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.awt.Color</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javalib.worldimages.*</span><span class="o">;</span>

<span class="kd">interface</span> <span class="nc">IGamePice</span> <span class="o">{</span>
    <span class="c1">//...</span>
    <span class="nc">WorldImage</span> <span class="nf">draw</span><span class="o">();</span>
<span class="o">}</span>

<span class="c1">//...</span>

<span class="c1">//in spaceship class</span>
<span class="kd">public</span> <span class="nc">WorldImage</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">EllipseImage</span><span class="o">(</span><span class="mi">50</span><span class="o">,</span> <span class="mi">60</span><span class="o">,</span> <span class="s">"solid"</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">color</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">//In invader class</span>
<span class="kd">public</span> <span class="nc">WorldImage</span> <span class="nf">draw</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="o">...</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="example---shape">Example - Shape</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">IShape</span> <span class="o">{</span>
    <span class="kt">double</span> <span class="nf">area</span><span class="o">();</span>
    <span class="kt">boolean</span> <span class="nf">biggerThan</span><span class="o">(</span><span class="nc">IShape</span> <span class="n">that</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Circle</span> <span class="kd">implements</span> <span class="nc">IShape</span> <span class="o">{</span>
    <span class="nc">CartPt</span> <span class="n">center</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">radius</span><span class="o">;</span> 
    <span class="nc">String</span> <span class="n">color</span><span class="o">;</span>
    
    <span class="nc">Circle</span><span class="o">(</span><span class="nc">CartPt</span> <span class="n">center</span><span class="o">,</span> <span class="kt">int</span> <span class="n">radius</span><span class="o">,</span> <span class="nc">String</span> <span class="n">color</span><span class="o">){</span>
        <span class="k">this</span><span class="o">.</span><span class="na">center</span> <span class="o">=</span> <span class="n">center</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">radius</span> <span class="o">=</span> <span class="n">radius</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/*
     // ** TEMPLATE ** 
     public returnType methodName() {
     ... this.center ...              -- CartPt
     ... this.radius ...              -- int
     ... this.color ...               -- String
     
     ... this.area() ...                  -- double 
     ... this.distToOrigin() ...          -- double 
     ... this.grow(int inc) ...           -- IShape
     ... this.biggerThan(IShape that) ... -- boolean
     ... this.contains(CartPt pt) ...     -- boolean
     */</span>
     <span class="c1">// See Lecture code for all of these methods</span>
    
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">area</span><span class="o">(){</span>
        <span class="k">return</span> <span class="nc">Math</span><span class="o">.</span><span class="na">PI</span> <span class="o">*</span> <span class="nc">Math</span><span class="o">.</span><span class="na">pow</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">radius</span><span class="o">,</span> <span class="mi">2</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">biggerThan</span><span class="o">(</span><span class="nc">IShape</span> <span class="n">that</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">area</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">that</span><span class="o">.</span><span class="na">area</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Square</span> <span class="kd">implements</span> <span class="nc">IShape</span> <span class="o">{</span>
    <span class="nc">CartPt</span> <span class="n">nw</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">color</span><span class="o">;</span>
    
    <span class="nc">Square</span><span class="o">(</span><span class="nc">CartPt</span> <span class="n">nw</span><span class="o">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">,</span> <span class="nc">String</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">nw</span> <span class="o">=</span> <span class="n">nw</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">size</span> <span class="o">=</span> <span class="n">size</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
    <span class="o">}</span>
    
        <span class="cm">/*
     // ** TEMPLATE ** 
     returnType methodName() {
     ... this.nw ...              -- CartPt
     ... this.size ...            -- int
     ... this.color ...           -- String
     
     ... this.area() ...                  -- double 
     ... this.distToOrigin() ...          -- double 
     ... this.grow(int inc) ...           -- IShape
     }
     */</span>
    
    <span class="c1">// to compute the area of this shape</span>
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">area</span><span class="o">(){</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">size</span> <span class="o">*</span> <span class="k">this</span><span class="o">.</span><span class="na">size</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">biggerThan</span><span class="o">(</span><span class="nc">IShape</span> <span class="n">that</span><span class="o">){</span>
    <span class="cm">/* everything in the Circle template plus:
    * fields of that:
    *
    * methods of that:
    * that.area() ... double
    */</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">area</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">that</span><span class="o">.</span><span class="na">area</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">CartPt</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">y</span><span class="o">;</span>
    
    <span class="nc">CartPt</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">// to compute the distance form this point to the origin</span>
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">distToOrigin</span><span class="o">(){</span>
        <span class="k">return</span> <span class="nc">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">*</span> <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">*</span> <span class="k">this</span><span class="o">.</span><span class="na">y</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="c1">// to compute the distance form this point to the given point</span>
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">distTo</span><span class="o">(</span><span class="nc">CartPt</span> <span class="n">pt</span><span class="o">){</span>
        <span class="k">return</span> <span class="nc">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">((</span><span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">-</span> <span class="n">pt</span><span class="o">.</span><span class="na">x</span><span class="o">)</span> <span class="o">*</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">-</span> <span class="n">pt</span><span class="o">.</span><span class="na">x</span><span class="o">)</span> <span class="o">+</span> 
                         <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">-</span> <span class="n">pt</span><span class="o">.</span><span class="na">y</span><span class="o">)</span> <span class="o">*</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">-</span> <span class="n">pt</span><span class="o">.</span><span class="na">y</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>You can also nest interfaces</strong>:</p>
<div style="width: 100%" class="ui rounded images">
<img class="ui image" src="./cs2510/lec4-fig1.svg" />
</div>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Combo</span> <span class="kd">implements</span> <span class="nc">IShape</span> <span class="o">{</span>
    <span class="nc">IShape</span> <span class="n">top</span><span class="o">;</span>
    <span class="nc">IShape</span> <span class="n">bottom</span><span class="o">;</span>
    
    <span class="nc">Combo</span><span class="o">(</span><span class="nc">IShape</span> <span class="n">top</span><span class="o">,</span> <span class="nc">Ishape</span> <span class="n">bottom</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">top</span> <span class="o">=</span> <span class="n">top</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">bottom</span> <span class="o">=</span> <span class="n">bottom</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="cm">/* fields:
    *   this.top ... IShape
    *   this.bottom ... IShape
    * methods:
    *   this.area() ... double
    *   this.biggerThan(IShape) ... boolean
    * methods for fields:
    *   this.top.area() ... double 
    *   this.bottom.area() ... double
    *   this.top.biggerThan(IShape) ... boolean
    *   this.bottom.biggerThan(IShape) ... boolean
    */</span>
    
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">area</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">top</span><span class="o">.</span><span class="na">area</span><span class="o">()</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">bottom</span><span class="o">.</span><span class="na">area</span><span class="o">();</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">biggerThan</span><span class="o">(</span><span class="nc">IShape</span> <span class="n">that</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">area</span><span class="o">()</span> <span class="o">&gt;</span> <span class="n">that</span><span class="o">.</span><span class="na">area</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ExamplesShapes</span><span class="o">{</span>
    <span class="nc">IShape</span> <span class="n">combo1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Combo</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">c1</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">s1</span><span class="o">);</span> <span class="c1">//both c1 and s1 are IShapes</span>
    <span class="nc">IShape</span> <span class="n">combo2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Combo</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">combo1</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">combo1</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="methods-for-self-referential-lists">Methods for Self-referential lists</h2>

<p>Recall list of numbers from Fundies 1:</p>
<div class="language-scheme highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;; A [List-of Number] is one of:</span>
<span class="c1">;; - '()</span>
<span class="c1">;; - (cons Number [List-of Number])</span>
</code></pre></div></div>
<p>Notice the self-referential nature of this.</p>

<h3 id="example---list-of-integers">Example - List of Integers</h3>
<div style="width: 100%" class="ui rounded images">
<img class="ui image" src="./cs2510/lec5-fig1.svg" />
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ILoInteger</span><span class="o">{}</span>

<span class="kd">class</span> <span class="nc">MtLoInteger</span> <span class="kd">implements</span> <span class="nc">ILoInteger</span> <span class="o">{}</span> 
<span class="c1">// By not having a constructor, it has the 'default' constructor which is nothing</span>

<span class="kd">class</span> <span class="nc">ConsLoInteger</span> <span class="kd">implements</span> <span class="nc">ILoInteger</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">first</span><span class="o">;</span>
    <span class="nc">ILoInteger</span> <span class="n">rest</span><span class="o">;</span>
    
    <span class="nc">ConsLoInteger</span><span class="o">(</span><span class="kt">int</span> <span class="n">first</span><span class="o">,</span> <span class="nc">ILoInteger</span> <span class="n">rest</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">rest</span> <span class="o">=</span> <span class="n">rest</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Recall the template from Fundies 1:</p>
<div class="language-scheme highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">Lon-temp</span> <span class="nv">alon</span><span class="p">)</span>
    <span class="p">(</span><span class="k">cond</span> <span class="p">[(</span><span class="nf">empty?</span> <span class="nv">alon</span><span class="p">)</span> <span class="o">...</span> <span class="p">]</span>
          <span class="p">[(</span><span class="nf">cons?</span> <span class="nv">alon</span><span class="p">)</span> <span class="o">...</span> <span class="p">(</span><span class="nf">first</span> <span class="nv">alon</span><span class="p">)</span><span class="o">...</span>
                            <span class="p">(</span><span class="nf">lon-temp</span> <span class="p">(</span><span class="nf">rest</span> <span class="nv">alon</span><span class="p">))</span> <span class="o">...</span><span class="p">]))</span>
</code></pre></div></div>

<h3 id="example---painting">Example - Painting</h3>

<div style="width: 100%" class="ui rounded images">
<img class="ui image" src="./cs2510/lec5-fig2.svg" />
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ILoPainting</span> <span class="o">{</span>
    <span class="c1">//count the paintings in this list</span>
    <span class="kt">int</span> <span class="nf">count</span><span class="o">();</span>
    <span class="c1">//get the paintings in this list that are by the artist with the given name</span>
    <span class="nc">ILoPainting</span> <span class="nf">getByArtist</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MtLoPainting</span> <span class="kd">implements</span> <span class="nc">ILoPainting</span> <span class="o">{</span>
    <span class="cm">/*
    methods:
        
    */</span>
    
    <span class="c1">// count the paintings in this MtLoPainting</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">count</span><span class="o">(){</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="nc">ILoPainting</span> <span class="nf">getByArtist</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ConsLoPainting</span> <span class="kd">implements</span> <span class="nc">ILoPainting</span> <span class="o">{</span>
    <span class="nc">Painting</span> <span class="n">first</span><span class="o">;</span>
    <span class="nc">ILoPainting</span> <span class="n">rest</span><span class="o">;</span>
    
    <span class="nc">ConsLoPainting</span><span class="o">(</span><span class="nc">Paining</span> <span class="n">first</span><span class="o">,</span> <span class="nc">ILoPainting</span> <span class="n">rest</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">rest</span> <span class="o">=</span> <span class="n">rest</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="cm">/* fields:
        this.first ... Painting
        this.rest ... ILoPainting
       Methods:
        this.count() ... int
       Methods for fields:
        this.rest.count() ... Int
        this.rest.getByArtist(String) ... ILoPainting
    */</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">count</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">count</span><span class="o">();</span>
    <span class="o">}</span>
    
    <span class="nc">ILoPainting</span> <span class="nf">getByArtist</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">.</span><span class="na">getName</span><span class="o">(</span><span class="n">name</span><span class="o">)){</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">getByArtist</span><span class="o">(</span><span class="n">name</span><span class="o">));</span>
        <span class="o">}</span> 
        <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">getByArtist</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Painting</span> <span class="o">{</span>
    <span class="nc">Artist</span> <span class="n">artist</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">title</span><span class="o">;</span>
    <span class="kt">double</span> <span class="n">price</span><span class="o">;</span> <span class="c1">// price in millions of dollars</span>
    <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    
    <span class="nc">Painting</span><span class="o">(</span><span class="nc">Artist</span> <span class="n">artist</span><span class="o">,</span> <span class="nc">String</span> <span class="n">title</span><span class="o">,</span> <span class="kt">int</span> <span class="n">price</span><span class="o">,</span> <span class="kt">int</span> <span class="n">year</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">artist</span> <span class="o">=</span> <span class="n">artist</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">price</span> <span class="o">=</span> <span class="n">price</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">=</span> <span class="n">year</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="cm">/* fields:
        this.artist ... Artist
        this.title ... String
        this.price ... Int
        this.year ... Int
       methods:
        this.count() ... int
        this.getByArtist(String) ... ILoPainting
       methods for fieds:
        this.artist.checkArtistName(String) ... boolean
    */</span>
    
    <span class="c1">//is the name of the artist of this Painting the same as the given one?</span>
    <span class="kt">boolean</span> <span class="nf">checkName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">artist</span><span class="o">.</span><span class="na">checkArtistName</span><span class="o">(</span><span class="n">name</span><span class="o">);</span> 
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Artist</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">yob</span><span class="o">;</span>
    
    <span class="nc">Artist</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">yob</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">yob</span> <span class="o">=</span> <span class="n">yob</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="cm">/* fields
        this.name ... String
        this.yob ... int
       methods:
        this.checkArtistName(String) ... boolean
    */</span>
    
    <span class="c1">//is this artist's name the same as the given one?</span>
    <span class="kt">boolean</span> <span class="nf">checkArtistName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Examples</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="nc">ILoPainting</span> <span class="n">mt</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MtLoPainting</span><span class="o">();</span>
    <span class="nc">ILoPainting</span> <span class="n">list1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">mona</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">mt</span><span class="o">);</span>
    <span class="nc">ILoPainting</span> <span class="n">list2</span> <span class="o">=</span><span class="k">new</span> <span class="nc">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">sunflowers</span><span class="o">,</span> <span class="n">list1</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="if-statement">If Statement</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">(</span><span class="kc">true</span><span class="o">-</span><span class="n">or</span><span class="o">-</span><span class="kc">false</span><span class="o">-</span><span class="n">question</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">runs</span> <span class="k">if</span> <span class="kc">true</span>
<span class="o">}</span>
<span class="c1">//the rest is optional</span>
<span class="k">else</span> <span class="o">{</span>
    <span class="n">runs</span> <span class="k">if</span> <span class="kc">false</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="insertion-sort">Insertion Sort</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//in interface:</span>

    <span class="nc">ILoPainting</span> <span class="nf">sortByYear</span><span class="o">();</span>
    <span class="c1">//inserts the given painting into this sorted list</span>
    <span class="nc">ILoPainting</span> <span class="nf">insertByYear</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">);</span>

<span class="c1">// in empty list</span>
    <span class="kd">public</span> <span class="nc">ILoPainting</span> <span class="nf">sortByYear</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">ILoPainting</span> <span class="nf">insertByYear</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="c1">// in ConsLoPainting</span>
    <span class="kd">public</span> <span class="nc">ILoPainting</span> <span class="nf">sortByYear</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">sortByYear</span><span class="o">().</span><span class="na">insertByYear</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="c1">//insert the painting into this sorted list,</span>
    <span class="c1">//list remains sorted after exiting the method</span>
    <span class="kd">public</span> <span class="nc">ILoPainting</span> <span class="nf">insertByYear</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">p</span><span class="o">.</span><span class="na">paintedBefore</span><span class="o">(</span><span class="n">first</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">insertByYear</span><span class="o">(</span><span class="n">p</span><span class="o">));</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="c1">// in Painting</span>
    <span class="kt">boolean</span> <span class="nf">paintedBefore</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">&lt;</span> <span class="n">p</span><span class="o">.</span><span class="na">year</span><span class="o">;</span>
    <span class="o">}</span>
<span class="c1">// in examples</span>
    <span class="kt">boolean</span> <span class="nf">testSort</span><span class="o">(</span><span class="nc">Tester</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">list2</span><span class="o">.</span><span class="na">sortByYear</span><span class="o">(),</span> 
                             <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">mona</span><span class="o">,</span> 
                             <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">sunflowers</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">mt</span><span class="o">)));</span>
    <span class="o">}</span>

</code></pre></div></div>

<h2 id="accumulator-methods">Accumulator Methods</h2>

<p>When to use an accumulator:</p>
<ol>
  <li>What information do you need to keep track of? Add a parameter</li>
  <li>What is the starting information? Remember it</li>
  <li>How does the function accumulate knowledge? Is it <code class="language-plaintext highlighter-rouge">+</code>, <code class="language-plaintext highlighter-rouge">cons</code>, selector?</li>
  <li>How do you use the accumulator? 
Wrapped in a local â€“ or helper â€“ and initialized with starting information</li>
</ol>

<h3 id="example---list-of-strings">Example - List of Strings</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ILoString</span> <span class="o">{</span>
    <span class="c1">//concatenate the strings in this list in reverse order</span>
    <span class="nc">String</span> <span class="nf">reverseConcat</span><span class="o">();</span>
    <span class="c1">//helps to reverse concatenate this list</span>
    <span class="c1">//accumulator: reversed concatenated string so far</span>
    <span class="nc">String</span> <span class="nf">reverseConcatAcc</span><span class="o">(</span><span class="nc">String</span> <span class="n">acc</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MtLoString</span> <span class="kd">implements</span> <span class="nc">ILoString</span> <span class="o">{</span>
    <span class="c1">//concatenate the strings in this list in reverse order</span>
    <span class="nc">String</span> <span class="nf">reverseConcat</span><span class="o">(){</span>
        <span class="k">return</span> <span class="s">""</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">//helps to reverse concatenate this list</span>
    <span class="c1">//accumulator: reversed concatenated string so far</span>
    <span class="nc">String</span> <span class="nf">reverseConcatAcc</span><span class="o">(</span><span class="nc">String</span> <span class="n">acc</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">acc</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ConsLoString</span> <span class="kd">implements</span> <span class="nc">ILoString</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">first</span><span class="o">;</span>
    <span class="nc">ILoString</span> <span class="n">rest</span><span class="o">;</span>
    
    <span class="nc">ConsLoString</span><span class="o">(</span><span class="nc">String</span> <span class="n">first</span><span class="o">,</span> <span class="nc">ILoString</span> <span class="n">rest</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">rest</span> <span class="o">=</span> <span class="n">rest</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">//concatenate the strings in this list in reverse order</span>
    <span class="nc">String</span> <span class="nf">reverseConcat</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">reverseConcatAcc</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="c1">//helps to reverse concatenate this list</span>
    <span class="c1">//accumulator: reversed concatenated string so far</span>
    <span class="nc">String</span> <span class="nf">reverseConcatAcc</span><span class="o">(</span><span class="nc">String</span> <span class="n">acc</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">reverseConcatAcc</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">acc</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="example---iat">Example - IAT</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">IAT</span> <span class="o">{</span>
    <span class="c1">//list the names in this tree</span>
    <span class="nc">ILoString</span> <span class="nf">names</span><span class="o">();</span>
    <span class="c1">//helps accumulate the names on the dad's side of the tree</span>
    <span class="c1">//accumulator: keeps track of the names on the dad's side</span>
    <span class="nc">ILoString</span> <span class="nf">namesAcc</span><span class="o">(</span><span class="nc">ILoString</span> <span class="n">acc</span><span class="o">);</span>
    
    <span class="c1">//is this tree well-formed?</span>
    <span class="kt">boolean</span> <span class="nf">wellFormed</span><span class="o">();</span>
    
    <span class="c1">//help to check if this tree is well-formed</span>
    <span class="c1">//accumulator: keeps track of the child's year of birth</span>
    <span class="kt">boolean</span> <span class="nf">wellFormedHelp</span><span class="o">(</span><span class="kt">int</span> <span class="n">childYob</span><span class="o">);</span>
    
    <span class="c1">//produce the IAT that is younger between this IAT and a given one</span>
    <span class="no">IAT</span> <span class="nf">youngerIAT</span><span class="o">(</span><span class="no">IAT</span> <span class="n">other</span><span class="o">);</span>
    
    <span class="c1">//produce the IAT that is younger between this IAT and a given one</span>
    <span class="no">IAT</span> <span class="nf">youngerIATHelp</span><span class="o">(</span><span class="no">IAT</span> <span class="n">other</span><span class="o">,</span> <span class="kt">int</span> <span class="n">yob</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Unknown</span> <span class="kd">implements</span> <span class="no">IAT</span> <span class="o">{</span>
    <span class="nc">Unknown</span><span class="o">()</span> <span class="o">{}</span>
    
    <span class="kd">public</span> <span class="nc">ILoString</span> <span class="nf">names</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">MtLoString</span><span class="o">();</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="nc">ILoString</span> <span class="nf">namesAcc</span><span class="o">(</span><span class="nc">ILoString</span> <span class="n">acc</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">acc</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kt">boolean</span> <span class="nf">wellFormed</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kt">boolean</span> <span class="nf">wellFormedHelp</span><span class="o">(</span><span class="kt">int</span> <span class="n">childYob</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="nf">youngerIAT</span><span class="o">(</span><span class="no">IAT</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="no">IAT</span> <span class="nf">youngerIATHelp</span><span class="o">(</span><span class="no">IAT</span> <span class="n">other</span><span class="o">,</span> <span class="kt">int</span> <span class="n">yob</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Person</span> <span class="kd">implements</span> <span class="no">IAT</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">yob</span><span class="o">;</span>
    <span class="no">IAT</span> <span class="n">mom</span><span class="o">;</span>
    <span class="no">IAT</span> <span class="n">dad</span><span class="o">;</span>
    
    <span class="nc">Person</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">,</span> <span class="kt">int</span> <span class="n">yob</span><span class="o">,</span> <span class="no">IAT</span> <span class="n">mom</span><span class="o">,</span> <span class="no">IAT</span> <span class="n">dad</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">yob</span> <span class="o">=</span> <span class="n">yob</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">mom</span> <span class="o">=</span> <span class="n">mom</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">dad</span> <span class="o">=</span> <span class="n">dad</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="nc">ILoString</span> <span class="nf">names</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">namesAcc</span><span class="o">(</span><span class="k">new</span> <span class="nc">MtLoString</span><span class="o">());</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="nc">ILoString</span> <span class="nf">namesAcc</span><span class="o">(</span><span class="nc">ILoString</span> <span class="n">acc</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoString</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">mom</span><span class="o">.</span><span class="na">names</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">dad</span><span class="o">.</span><span class="na">names</span><span class="o">(</span><span class="n">acc</span><span class="o">)));</span>
    <span class="o">}</span>
    
    <span class="kt">boolean</span> <span class="nf">wellFormed</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">mom</span><span class="o">.</span><span class="na">wellFormedHelp</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">yob</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
               <span class="k">this</span><span class="o">.</span><span class="na">dad</span><span class="o">.</span><span class="na">wellFormedHelp</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">yob</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kt">boolean</span> <span class="nf">wellFormedHelp</span><span class="o">(</span><span class="kt">int</span> <span class="n">childYob</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">yob</span> <span class="o">&lt;</span> <span class="n">childYob</span> <span class="o">&amp;&amp;</span>
               <span class="k">this</span><span class="o">.</span><span class="na">mom</span><span class="o">.</span><span class="na">wellFormed</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">yob</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
               <span class="k">this</span><span class="o">.</span><span class="na">dad</span><span class="o">.</span><span class="na">wellFormed</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">yob</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="nf">youngerIAT</span><span class="o">(</span><span class="no">IAT</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">other</span><span class="o">.</span><span class="na">youngerIATHelp</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">yob</span><span class="o">);</span> <span class="c1">//you don't have to ask what other is</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="no">IAT</span> <span class="nf">youngerIATHelp</span><span class="o">(</span><span class="no">IAT</span> <span class="n">other</span><span class="o">,</span> <span class="kt">int</span> <span class="n">year</span><span class="o">){</span>
        <span class="k">if</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">yob</span> <span class="o">&gt;</span> <span class="n">year</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">other</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Another way to do this problem is to append the father list and the mother list before putting them into the <code class="language-plaintext highlighter-rouge">consLoString</code>:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="nc">ILoString</span> <span class="nf">names2</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoString</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">mom</span><span class="o">.</span><span class="na">names2</span><span class="o">().</span><span class="na">append</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">dad</span><span class="o">.</span><span class="na">names2</span><span class="o">()));</span>
<span class="o">}</span>
</code></pre></div></div>

<h1 id="practice-design">Practice Design</h1>

<p>See <a href="https://course.ccs.neu.edu/cs2510/lecture8.html">Lecture 8</a> for the problems.</p>

<div style="width: 100%" class="ui rounded images">
<img class="ui image" src="./cs2510/lec8-fig1.png" />
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">class</span> <span class="nc">Author</span> <span class="o">{</span>
  <span class="nc">String</span> <span class="n">first</span><span class="o">;</span>
  <span class="nc">String</span> <span class="n">last</span><span class="o">;</span>
  
  <span class="nc">Author</span><span class="o">(</span><span class="nc">String</span> <span class="n">first</span><span class="o">,</span> <span class="nc">String</span> <span class="n">last</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">last</span> <span class="o">=</span> <span class="n">last</span><span class="o">;</span>
  <span class="o">}</span>
  
  <span class="nc">String</span> <span class="nf">getBib</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">last</span> <span class="o">+</span> <span class="s">", "</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">+</span> <span class="s">"."</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">IBib</span> <span class="o">{</span>
  <span class="nc">ILoString</span> <span class="nf">sources</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Book</span> <span class="kd">implements</span> <span class="nc">IBib</span> <span class="o">{</span>
  <span class="nc">Author</span> <span class="n">author</span><span class="o">;</span>
  <span class="nc">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="nc">String</span> <span class="n">publisher</span><span class="o">;</span>
  <span class="nc">ILoBib</span> <span class="n">bibs</span><span class="o">;</span>
  
  <span class="nc">Book</span><span class="o">(</span><span class="nc">Author</span> <span class="n">author</span><span class="o">,</span> <span class="nc">String</span> <span class="n">title</span><span class="o">,</span> <span class="nc">String</span> <span class="n">publisher</span><span class="o">,</span> <span class="nc">ILoBib</span> <span class="n">bibs</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">author</span> <span class="o">=</span> <span class="n">author</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">bibs</span> <span class="o">=</span> <span class="n">bibs</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">publisher</span> <span class="o">=</span> <span class="n">publisher</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nc">ILoString</span> <span class="nf">sources</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoString</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">author</span><span class="o">.</span><span class="na">getBib</span><span class="o">()</span> <span class="o">+</span> <span class="s">"\""</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">+</span> <span class="s">"\""</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">bibs</span><span class="o">.</span><span class="na">sourcesFromList</span><span class="o">());</span>
  <span class="o">}</span>

<span class="o">}</span>

<span class="kd">class</span> <span class="nc">wikiArticles</span> <span class="kd">implements</span> <span class="nc">IBib</span> <span class="o">{</span>
  <span class="nc">Author</span> <span class="n">author</span><span class="o">;</span>
  <span class="nc">String</span> <span class="n">title</span><span class="o">;</span>
  <span class="nc">String</span> <span class="n">url</span><span class="o">;</span>
  <span class="nc">ILoBib</span> <span class="n">bibs</span><span class="o">;</span>
  
  <span class="n">wikiArticles</span><span class="o">(</span><span class="nc">Author</span> <span class="n">author</span><span class="o">,</span> <span class="nc">String</span> <span class="n">title</span><span class="o">,</span> <span class="nc">String</span> <span class="n">url</span><span class="o">,</span> <span class="nc">ILoBib</span> <span class="n">bibs</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">author</span> <span class="o">=</span> <span class="n">author</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">url</span> <span class="o">=</span> <span class="n">url</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">bibs</span> <span class="o">=</span> <span class="n">bibs</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nc">ILoString</span> <span class="nf">sources</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">bibs</span><span class="o">.</span><span class="na">sourcesFromList</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">ILoString</span> <span class="o">{</span>
  <span class="nc">ILoString</span> <span class="nf">append</span><span class="o">(</span><span class="nc">ILoString</span> <span class="n">other</span><span class="o">);</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">MtLoString</span> <span class="kd">implements</span> <span class="nc">ILoString</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nc">ILoString</span> <span class="nf">append</span><span class="o">(</span><span class="nc">ILoString</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">other</span><span class="o">;</span>
  <span class="o">}</span>
  
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ConsLoString</span> <span class="kd">implements</span> <span class="nc">ILoString</span> <span class="o">{</span>
  <span class="nc">String</span> <span class="n">first</span><span class="o">;</span>
  <span class="nc">ILoString</span> <span class="n">rest</span><span class="o">;</span>
  
  <span class="nc">ConsLoString</span><span class="o">(</span><span class="nc">String</span> <span class="n">first</span><span class="o">,</span> <span class="nc">ILoString</span> <span class="n">rest</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">rest</span> <span class="o">=</span> <span class="n">rest</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nc">ILoString</span> <span class="nf">append</span><span class="o">(</span><span class="nc">ILoString</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span> <span class="c1">// TODO: See previous lectures for append method</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">ILoBib</span> <span class="o">{</span>

  <span class="nc">ILoString</span> <span class="nf">sourcesFromList</span><span class="o">();}</span>

<span class="kd">class</span> <span class="nc">MtLoBib</span> <span class="kd">implements</span> <span class="nc">ILoBib</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nc">ILoString</span> <span class="nf">sourcesFromList</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">MtLoString</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>

  

<span class="kd">class</span> <span class="nc">ConsLoBib</span> <span class="kd">implements</span> <span class="nc">ILoBib</span><span class="o">{</span>
  <span class="nc">IBib</span> <span class="n">first</span><span class="o">;</span>
  <span class="nc">ILoBib</span> <span class="n">rest</span><span class="o">;</span>
  
  <span class="nc">ConsLoBib</span><span class="o">(</span><span class="nc">IBib</span> <span class="n">first</span><span class="o">,</span> <span class="nc">ILoBib</span> <span class="n">rest</span><span class="o">){</span>
    <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">rest</span> <span class="o">=</span> <span class="n">rest</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nc">ILoString</span> <span class="nf">sourcesFromList</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">//return new ConsLoString(this.first.sources(), this.rest.sourcesFromList());</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">.</span><span class="na">sources</span><span class="o">().</span><span class="na">append</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">sourcesFromList</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Problem 2 variant A</p>

<p>See if a given List has all of these requirements:</p>
<ul>
  <li>A number that is even</li>
  <li>A number that is positive and odd</li>
  <li>A number between 5 and 10, inclusive</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ILoInt</span> <span class="o">{</span>
    <span class="c1">//checks if this list satisfies the three requirements</span>
    <span class="kt">boolean</span> <span class="nf">satisfies</span><span class="o">();</span>
    <span class="c1">//helps check if the list satisfies the requirements</span>
    <span class="c1">// aaccumulators: keeps track of whether each requirement was satisfied</span>
    <span class="kt">boolean</span> <span class="nf">satisfiesAcc</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">even</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">odd</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">bet5and10</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MtLoInt</span> <span class="kd">implements</span> <span class="nc">ILoInt</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">satisfies</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">satisfiesAcc</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">even</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">odd</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">bet5and10</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">even</span> <span class="o">&amp;&amp;</span> <span class="n">odd</span> <span class="o">&amp;&amp;</span> <span class="n">bet5and10</span><span class="o">;</span>
    <span class="o">}</span>

<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ConsLoInt</span> <span class="kd">implements</span> <span class="nc">ILoInt</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">first</span><span class="o">;</span>
    <span class="nc">ILoInt</span> <span class="n">rest</span><span class="o">;</span>
    
    <span class="nc">ConsLoInt</span><span class="o">(</span><span class="kt">int</span> <span class="n">first</span><span class="o">,</span> <span class="nc">ILoInt</span> <span class="n">rest</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">rest</span> <span class="o">=</span> <span class="n">rest</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">satisfies</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nf">satisfiesAcc</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="kc">false</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">satisfiesAcc</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">even</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">odd</span><span class="o">,</span> <span class="kt">boolean</span> <span class="n">bet5and10</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">even</span> <span class="o">&amp;&amp;</span> <span class="n">odd</span> <span class="o">&amp;&amp;</span> <span class="n">bet5and10</span><span class="o">)</span> <span class="o">||</span>
               <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">satisfiesAcc</span><span class="o">(</span><span class="n">even</span> <span class="o">||</span> <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="o">,</span> 
                                      <span class="n">odd</span> <span class="o">||</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">),</span>
                                      <span class="n">bet5and10</span> <span class="o">||</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">&gt;=</span> <span class="mi">5</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="o">)));</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Examples</span> <span class="o">{</span>

<span class="o">}</span>
</code></pre></div></div>

<p>If you are working with booleans, you donâ€™t need an <code class="language-plaintext highlighter-rouge">if</code> statement.</p>

<h3 id="working-with-images">Working with Images</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">WorldCanvas</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WorldCanvas</span><span class="o">(</span><span class="mi">300</span><span class="o">,</span> <span class="mi">500</span><span class="o">);</span>
<span class="nc">WorldImage</span> <span class="n">img1</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">ship2</span><span class="o">.</span><span class="na">draw</span><span class="o">();</span>
<span class="nc">WorldImage</span> <span class="n">img2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">VisiblePinholeImage</span><span class="o">(</span><span class="n">img1</span><span class="o">).</span><span class="na">movePinholeTo</span><span class="o">(</span><span class="k">new</span> <span class="nc">Posn</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span> <span class="mi">0</span><span class="o">));</span>
<span class="n">img</span> <span class="mi">2</span> <span class="k">new</span> <span class="nc">OverlayImage</span><span class="o">(</span><span class="k">new</span> <span class="nc">RectangleImage</span><span class="o">(</span><span class="mi">30</span><span class="o">,</span> <span class="mi">30</span><span class="o">,</span> <span class="s">"solid"</span><span class="o">,</span> <span class="n">color</span><span class="o">.</span><span class="na">Black</span><span class="o">),</span> <span class="n">img2</span><span class="o">);</span>
<span class="nc">WorldScene</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WorldScene</span><span class="o">(</span><span class="mi">300</span><span class="o">,</span> <span class="mi">500</span><span class="o">),</span> <span class="n">placeImageXY</span><span class="o">(</span><span class="n">img3</span><span class="o">,</span> <span class="mi">150</span><span class="o">,</span> <span class="mi">150</span><span class="o">);</span>
</code></pre></div></div>

<h1 id="abstract-classes-and-inheritance">Abstract Classes and Inheritance</h1>

<p>Consider our <code class="language-plaintext highlighter-rouge">IShape</code> definition:</p>

<p>Remember that the <code class="language-plaintext highlighter-rouge">Square</code> and <code class="language-plaintext highlighter-rouge">Circle</code> classes have similarities.</p>

<p>For example: <code class="language-plaintext highlighter-rouge">CartPt center</code>, <code class="language-plaintext highlighter-rouge">String color</code></p>

<div style="width: 100%" class="ui rounded images">
<img class="ui image" src="./cs2510/lec9-fig1.png" />
</div>

<p>NOTE: There is <code class="language-plaintext highlighter-rouge">IShape</code> above <code class="language-plaintext highlighter-rouge">AShape</code></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//underneath IShape</span>
<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AShape</span> <span class="kd">implements</span> <span class="nc">IShape</span><span class="o">{</span>
    <span class="nc">CartPt</span> <span class="n">location</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">color</span><span class="o">;</span>
    
    <span class="nc">AShape</span><span class="o">(</span><span class="nc">CartPt</span> <span class="n">location</span><span class="o">,</span> <span class="nc">String</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">location</span> <span class="o">=</span> <span class="n">location</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">//compuete the area of this AShape</span>
    <span class="kd">abstract</span> <span class="kd">public</span> <span class="kt">double</span> <span class="nf">area</span><span class="o">();</span>
    
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">distToOrigin</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">location</span><span class="o">.</span><span class="na">distToOrigin</span><span class="o">();</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">biggerThan</span><span class="o">(</span><span class="nc">IShape</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">area</span><span class="o">()</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="na">area</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Circle</span> <span class="kd">extends</span> <span class="nc">AShape</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">radius</span><span class="o">;</span>
    
    <span class="nc">Circle</span><span class="o">(</span><span class="nc">CartPt</span> <span class="n">center</span><span class="o">,</span> <span class="kt">int</span> <span class="n">radius</span><span class="o">,</span> <span class="nc">String</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">center</span><span class="o">,</span> <span class="n">color</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">radius</span> <span class="o">=</span> <span class="n">radius</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">double</span> <span class="nf">distToOrigin</span><span class="o">()</span> <span class="o">{</span> <span class="c1">//overriding the one in parent class</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">location</span><span class="o">.</span><span class="na">distToOrigin</span><span class="o">()</span> <span class="o">-</span> <span class="k">this</span><span class="o">.</span><span class="na">radius</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">Rect</span> <span class="kd">extends</span> <span class="nc">AShape</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">width</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">height</span><span class="o">;</span>
    
    <span class="nc">Rect</span><span class="o">(</span><span class="nc">CartPt</span> <span class="n">nw</span><span class="o">,</span> <span class="kt">int</span> <span class="n">width</span><span class="o">,</span> <span class="kt">int</span> <span class="n">height</span><span class="o">,</span> <span class="nc">String</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">nw</span><span class="o">,</span> <span class="n">color</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">width</span> <span class="o">=</span> <span class="n">width</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">height</span> <span class="o">=</span> <span class="n">height</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Square</span> <span class="kd">extends</span> <span class="nc">Rect</span> <span class="o">{</span>
    <span class="nc">Square</span><span class="o">(</span><span class="nc">CartPt</span> <span class="n">nw</span><span class="o">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">,</span> <span class="nc">String</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">nw</span><span class="o">,</span> <span class="n">size</span><span class="o">,</span> <span class="n">size</span><span class="o">,</span> <span class="n">color</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The extends means that it inherits everything from <code class="language-plaintext highlighter-rouge">AShape</code>. And because <code class="language-plaintext highlighter-rouge">AShape</code> implements <code class="language-plaintext highlighter-rouge">IShape</code>, so does <code class="language-plaintext highlighter-rouge">Circle</code>, <code class="language-plaintext highlighter-rouge">Square</code>, and <code class="language-plaintext highlighter-rouge">Recte</code>.</p>

<p>You cannot make instances of <code class="language-plaintext highlighter-rouge">AShape</code> (because it is abstract).</p>

<p>You need to say <code class="language-plaintext highlighter-rouge">super(VARS)</code> to send the parameters to the constructor.</p>

<p>You need templates for abstract classes.</p>

<p>You can extend classes that arenâ€™t abstract.</p>

<p>You can override abstract classes</p>
<ul>
  <li>It runs the most local method</li>
</ul>

<details>
  <summary>
  Why have an abstract class and an interface?
  </summary>
  
  It's going to make our code more flexible when we want to add more things to our IShapes.  
  
</details>

<details>
  <summary>
  Should a Combo shape be AShape?
  </summary>
  
  No; it doesn't have location or color.
  
</details>

<h1 id="customizing-constructors-for-correctness-and-convenience">Customizing Constructors for Correctness and Convenience</h1>

<h3 id="overriding">Overriding</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="mi">0</span><span class="o">;}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">B</span> <span class="kd">extends</span> <span class="no">A</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="mi">1</span><span class="o">;}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="overloading">Overloading</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="nf">hi</span><span class="o">()</span> <span class="o">{</span> 
        <span class="k">return</span> <span class="s">"hello"</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nc">String</span> <span class="nf">hi</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span> 
        <span class="k">return</span> <span class="s">"hello, "</span> <span class="o">+</span> <span class="n">name</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Recall <code class="language-plaintext highlighter-rouge">IGamePiece</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">...</span>
<span class="kd">interface</span> <span class="nc">IGamePiece</span> <span class="o">{</span>
    <span class="c1">//Constant for the starting position</span>
    <span class="nc">Location</span> <span class="no">START_LOCATION</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Location</span><span class="o">(</span><span class="mi">150</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
    <span class="o">...</span>
<span class="o">}</span>

<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AGamePiece</span> <span class="kd">implements</span> <span class="nc">IGamePiece</span> <span class="o">{</span>
    <span class="nc">Location</span> <span class="n">loc</span><span class="o">;</span>
    <span class="nc">Color</span> <span class="n">color</span><span class="o">;</span>
    
    <span class="nc">AGamePiece</span><span class="o">(</span><span class="nc">Location</span> <span class="n">loc</span><span class="o">,</span> <span class="nc">Color</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">loc</span> <span class="o">=</span> <span class="n">loc</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">// Overloading</span>
    <span class="nc">AGamePiece</span><span class="o">(</span><span class="nc">Color</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="no">START_LOCATION</span><span class="o">,</span> <span class="n">color</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">Invader</span> <span class="kd">extends</span> <span class="nc">AGamePiece</span> <span class="o">{</span>
   <span class="kt">int</span> <span class="n">bullets</span><span class="o">;</span>
   <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
   
   <span class="nc">Invader</span><span class="o">(</span><span class="nc">Location</span> <span class="n">loc</span><span class="o">,</span> <span class="nc">Color</span> <span class="n">color</span><span class="o">,</span> <span class="kt">int</span> <span class="n">bullets</span><span class="o">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">loc</span><span class="o">,</span> <span class="n">color</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">bullets</span> <span class="o">=</span> <span class="n">bullets</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">size</span> <span class="o">=</span> <span class="n">size</span><span class="o">;</span>
   <span class="o">}</span>
   
   <span class="c1">//Overloading</span>
   <span class="nc">Invader</span><span class="o">(</span><span class="nc">Color</span> <span class="n">color</span><span class="o">,</span> <span class="kt">int</span> <span class="n">b</span><span class="o">,</span> <span class="kt">int</span> <span class="n">s</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">color</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">bullets</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">size</span> <span class="o">=</span> <span class="n">s</span><span class="o">;</span>
   <span class="o">}</span>
   <span class="o">...</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Spaceship</span> <span class="kd">extends</span> <span class="nc">AGamePiece</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">speed</span><span class="o">;</span>
    
    <span class="nc">Spaceship</span><span class="o">(</span><span class="nc">Location</span> <span class="n">loc</span><span class="o">,</span> <span class="nc">Color</span> <span class="n">color</span><span class="o">,</span> <span class="kt">int</span> <span class="n">speed</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">loc</span><span class="o">,</span> <span class="n">color</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">speed</span> <span class="o">=</span> <span class="n">speed</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="nc">Spaceship</span><span class="o">(</span><span class="nc">Color</span> <span class="n">color</span><span class="o">,</span> <span class="kt">int</span> <span class="n">speed</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">color</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">speed</span> <span class="o">=</span> <span class="n">speed</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="o">...</span>
</code></pre></div></div>

<details>
  <summary>
  How do you call one constructor using another?
  </summary>

  <p>Use <code class="language-plaintext highlighter-rouge">this</code>. Ex: <code class="language-plaintext highlighter-rouge">this(c, l)</code>.</p>

</details>

<details>
  <summary>
  What is overloading?
  </summary>

  <p>Its when you have two methods have the same name but different parameters.</p>

</details>

<h3 id="rules-for-classes">Rules for Classes</h3>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Date</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">month</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">day</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    
    <span class="c1">//constructor for data integrity</span>
    <span class="nc">Date</span><span class="o">(</span><span class="kt">int</span> <span class="n">m</span><span class="o">,</span> <span class="kt">int</span> <span class="n">d</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">Utils</span> <span class="n">u</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Utils</span><span class="o">();</span>
        
        <span class="k">this</span><span class="o">.</span><span class="na">month</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="na">checkRange</span><span class="o">(</span><span class="n">m</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">12</span><span class="o">,</span> <span class="s">"Month is invalid"</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">day</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="na">checkRange</span><span class="o">(</span><span class="n">d</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">31</span><span class="o">,</span> <span class="s">"Day is invalid"</span><span class="o">);</span>
        <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">=</span> <span class="n">u</span><span class="o">.</span><span class="na">checkRange</span><span class="o">(</span><span class="n">y</span><span class="o">,</span> <span class="mi">1900</span><span class="o">,</span> <span class="mi">2050</span><span class="o">,</span> <span class="s">"Year is invalid"</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="c1">// constructor for convenience</span>
    <span class="nc">Date</span><span class="o">(</span><span class="kt">int</span> <span class="n">m</span><span class="o">,</span> <span class="kt">int</span> <span class="n">d</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">(</span><span class="n">m</span><span class="o">,</span> <span class="n">d</span><span class="o">,</span> <span class="mi">2021</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Utils</span> <span class="o">{</span>
    <span class="c1">// Checks that the given int is within some range</span>
    <span class="kt">int</span> <span class="nf">checkRange</span><span class="o">(</span><span class="kt">int</span> <span class="n">n</span><span class="o">,</span> <span class="kt">int</span> <span class="n">low</span><span class="o">,</span> <span class="kt">int</span> <span class="n">high</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">n</span> <span class="o">&lt;=</span> <span class="n">high</span> <span class="o">&amp;&amp;</span> <span class="n">n</span> <span class="o">&gt;=</span> <span class="n">low</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">n</span><span class="o">;</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
        <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ExamplesDates</span> <span class="o">{</span>
    <span class="nc">Date</span> <span class="n">today</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">2021</span><span class="o">);</span>
    <span class="nc">Date</span> <span class="n">lastChristmas</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Date</span><span class="o">(</span><span class="mi">12</span><span class="o">,</span> <span class="mi">25</span><span class="o">,</span> <span class="mi">2020</span><span class="o">);</span>
    <span class="c1">// This shouldn't be allowed</span>
    <span class="c1">// Date badDate = new Date(-12, 120, 2);</span>
    
    <span class="kt">boolean</span> <span class="nf">testDates</span><span class="o">(</span><span class="nc">Tester</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkConstructorExceptions</span><span class="o">(</span><span class="k">new</span> <span class="nc">IllegalArgumentException</span><span class="o">(</span><span class="s">"Month is invalid"</span><span class="o">),</span>
                                            <span class="s">"Date"</span><span class="o">,</span> <span class="o">-</span><span class="mi">3</span><span class="o">,</span> <span class="mi">120</span><span class="o">,</span> <span class="mi">5000</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
               <span class="n">t</span><span class="o">.</span><span class="na">checkException</span><span class="o">(</span><span class="k">new</span> <span class="nc">IllegialArgumentException</span><span class="o">(</span><span class="s">"nope"</span><span class="o">),</span>
                                <span class="k">new</span> <span class="nf">Utils</span><span class="o">(),</span> <span class="s">"checkRange"</span><span class="o">,</span> <span class="mi">30</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="s">"nope"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h1 id="defining-sameness-for-complex-data">Defining Sameness for Complex Data</h1>

<h3 id="properties-of-sameness">Properties of Sameness</h3>
<ul>
  <li>Reflexivity - <code class="language-plaintext highlighter-rouge">A</code> is the same as <code class="language-plaintext highlighter-rouge">A</code></li>
  <li>Symmetry - if <code class="language-plaintext highlighter-rouge">A</code> is the same as <code class="language-plaintext highlighter-rouge">B</code>, then <code class="language-plaintext highlighter-rouge">B</code> is the same as <code class="language-plaintext highlighter-rouge">A</code>.</li>
  <li>Transitivity - if <code class="language-plaintext highlighter-rouge">A</code> is the same as <code class="language-plaintext highlighter-rouge">B</code> and <code class="language-plaintext highlighter-rouge">B</code> is the same as <code class="language-plaintext highlighter-rouge">C</code>, then <code class="language-plaintext highlighter-rouge">A</code> is the same as <code class="language-plaintext highlighter-rouge">C</code>.</li>
  <li>Totality - comparing any two objects of the same type should get the correct answer</li>
</ul>

<p><strong>Primitive Data</strong>:</p>

<p>Ints:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span>

<span class="n">x</span> <span class="o">==</span> <span class="n">y</span> <span class="c1">//False</span>
</code></pre></div></div>

<p>Doubles:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">double</span> <span class="n">w</span> <span class="o">=</span> <span class="mf">1.5</span><span class="o">;</span>
<span class="kt">double</span> <span class="n">z</span> <span class="o">=</span> <span class="mf">1.5</span><span class="o">;</span>

<span class="n">w</span> <span class="o">-</span> <span class="n">z</span> <span class="o">&lt;=</span> <span class="mf">0.0001</span> <span class="c1">// Close enough</span>
</code></pre></div></div>

<p>Booleans:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">boolean</span> <span class="n">t</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="kt">boolean</span> <span class="n">s</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

<span class="n">t</span> <span class="o">==</span> <span class="n">s</span>
</code></pre></div></div>

<p>Strings (not actually primitive):</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">c</span> <span class="o">=</span> <span class="s">"hi"</span><span class="o">;</span>
<span class="nc">String</span> <span class="n">d</span> <span class="o">=</span> <span class="s">"hi"</span><span class="o">;</span>

<span class="n">c</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">d</span><span class="o">);</span>
</code></pre></div></div>

<p>What about for complex data?</p>

<p>Consider a <code class="language-plaintext highlighter-rouge">Circle</code> from <code class="language-plaintext highlighter-rouge">IShape</code>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in circle class</span>
<span class="kt">boolean</span> <span class="nf">sameCircle</span><span class="o">(</span><span class="nc">Circle</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">radius</span> <span class="o">==</span> <span class="n">that</span><span class="o">.</span><span class="na">radius</span> <span class="o">&amp;&amp;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">that</span><span class="o">.</span><span class="na">color</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">location</span><span class="o">.</span><span class="na">sameLocation</span><span class="o">(</span><span class="n">that</span><span class="o">.</span><span class="na">location</span><span class="o">);</span>
    
<span class="o">}</span>

<span class="c1">// in location class</span>
<span class="kt">boolean</span> <span class="nf">sameLocation</span><span class="o">(</span><span class="nc">Location</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">==</span> <span class="n">that</span><span class="o">.</span><span class="na">x</span> <span class="o">&amp;&amp;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">==</span> <span class="n">that</span><span class="o">.</span><span class="na">y</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// in examples</span>
<span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">c1</span><span class="o">.</span><span class="na">sameCircle</span><span class="o">(</span><span class="n">c2</span><span class="o">),</span> <span class="kc">false</span><span class="o">);</span> 
<span class="c1">// but at compile time, these are both IShape and not circles.</span>
</code></pre></div></div>

<p>We want to be able to compare two <code class="language-plaintext highlighter-rouge">IShape</code>s.</p>

<p>We need to cast it. And we need type checkers so we donâ€™t cast a random thing as a circle.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in circle</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">sameShape</span><span class="o">(</span><span class="nc">IShape</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">that</span> <span class="k">instanceof</span> <span class="nc">Circle</span><span class="o">)</span> <span class="o">{</span>
     <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">sameCircle</span><span class="o">((</span><span class="nc">Circle</span><span class="o">)</span> <span class="n">that</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
     <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// in examples</span>
<span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">c1</span><span class="o">.</span><span class="na">sameShape</span><span class="o">(</span><span class="n">c2</span><span class="o">),</span> <span class="kc">false</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
    <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">c1</span><span class="o">.</span><span class="na">sameShape</span><span class="o">(</span><span class="n">c1</span><span class="o">),</span> <span class="kc">true</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
    <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">c1</span><span class="o">.</span><span class="na">sameShape</span><span class="o">(</span><span class="n">r1</span><span class="o">),</span> <span class="kc">false</span><span class="o">);</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">instanceof</code> follows the â€œis-aâ€ arrows</p>
<ul>
  <li>c1 instance of Circle -&gt; true</li>
  <li>c1 instance of Rect -&gt; false</li>
  <li>c1 instance of IShape -&gt; true</li>
  <li>c1 instance of AShape -&gt; true</li>
</ul>

<p><code class="language-plaintext highlighter-rouge">instanceof</code> returns true too often</p>
<ul>
  <li>square instance of rect -&gt; true</li>
  <li>rect instance of square -&gt; false</li>
</ul>

<p>Violates the law of symmetry</p>

<p>How can we get around this?</p>
<ul>
  <li>Make our own type checkers</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//in abstract class</span>

<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isCircle</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span> <span class="o">}</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isRect</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span> <span class="o">}</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">isSquare</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span> <span class="o">}</span>

<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">sameCircle</span><span class="o">(</span><span class="nc">Circle</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span> <span class="o">}</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">sameRect</span><span class="o">(</span><span class="nc">Rect</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span> <span class="o">}</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">sameSquare</span><span class="o">(</span><span class="nc">Square</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span> <span class="o">}</span>

</code></pre></div></div>

<p>And just override it once in each class.</p>

<p><strong>Double dynamic dispatch</strong>:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in circle class</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">sameShape</span><span class="o">(</span><span class="nc">IShape</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">that</span><span class="o">.</span><span class="na">sameCircle</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">// in combo class</span>
<span class="kd">public</span> <span class="n">booleam</span> <span class="nf">sameCombo</span><span class="o">(</span><span class="nc">Combo</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">top</span><span class="o">.</span><span class="na">sameShape</span><span class="o">(</span><span class="n">that</span><span class="o">.</span><span class="na">top</span><span class="o">)</span> <span class="o">&amp;&amp;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">bot</span><span class="o">.</span><span class="na">sameShape</span><span class="o">(</span><span class="n">that</span><span class="o">.</span><span class="na">bot</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Another example:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//in IFoo</span>
<span class="kt">boolean</span> <span class="nf">sameFoo</span><span class="o">(</span><span class="nc">IFoo</span> <span class="n">that</span><span class="o">)</span>
<span class="kt">boolean</span> <span class="nf">sameX</span><span class="o">(</span><span class="no">X</span> <span class="n">that</span><span class="o">)</span>
<span class="kt">boolean</span> <span class="nf">sameY</span><span class="o">(</span><span class="no">Y</span> <span class="n">that</span><span class="o">)</span>
<span class="kt">boolean</span> <span class="nf">sameZ</span><span class="o">(</span><span class="no">Z</span> <span class="n">that</span><span class="o">)</span>
<span class="c1">// in AFoo</span>
<span class="kt">boolean</span> <span class="nf">sameX</span><span class="o">(</span><span class="no">X</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span> <span class="o">}</span>
<span class="kt">boolean</span> <span class="nf">sameY</span><span class="o">(</span><span class="no">Y</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span> <span class="o">}</span>
<span class="kt">boolean</span> <span class="nf">sameZ</span><span class="o">(</span><span class="no">Z</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span> <span class="k">return</span> <span class="kc">false</span><span class="o">;</span> <span class="o">}</span>
<span class="c1">// in X:</span>
<span class="kt">boolean</span> <span class="nf">someFoo</span><span class="o">(</span><span class="nc">IFoo</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">that</span><span class="o">.</span><span class="na">sameX</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
<span class="o">}</span>

<span class="kt">boolean</span> <span class="nf">sameX</span><span class="o">(</span><span class="no">X</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">...</span> <span class="k">this</span><span class="o">.</span><span class="na">field</span> <span class="o">==</span> <span class="n">that</span><span class="o">.</span><span class="na">field</span> <span class="o">...;</span> <span class="c1">//compare all fields</span>
<span class="o">}</span>
<span class="c1">// the same for the rest of the classes</span>
</code></pre></div></div>

<h3 id="sameness-for-lists">Sameness for Lists</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ILoInt</span> <span class="o">{</span>
    <span class="c1">// is this ILoInt the same as the given one?</span>
    <span class="kt">boolean</span> <span class="nf">sameLoInt</span><span class="o">(</span><span class="nc">ILoInt</span> <span class="n">that</span><span class="o">);</span>
    <span class="c1">// is this ILoInt the same as the given ConsLoInt?</span>
    <span class="kt">boolean</span> <span class="nf">sameCons</span><span class="o">(</span><span class="nc">ConsLoInt</span> <span class="n">that</span><span class="o">);</span>
    <span class="c1">// is this ILoInt the same as the given MtLoInt?</span>
    <span class="kt">boolean</span> <span class="nf">sameMt</span><span class="o">(</span><span class="nc">MtLoInt</span> <span class="n">that</span><span class="o">);</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">MtLoInt</span> <span class="kd">implements</span> <span class="nc">ILoInt</span> <span class="o">{</span>
    <span class="c1">// is this ILoInt the same as the given one?</span>
    <span class="kt">boolean</span> <span class="nf">sameLoInt</span><span class="o">(</span><span class="nc">ILoInt</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">that</span><span class="o">.</span><span class="na">sameMt</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kt">boolean</span> <span class="nf">sameCons</span><span class="o">(</span><span class="nc">ConsLoInt</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kt">boolean</span> <span class="nf">sameMt</span><span class="o">(</span><span class="nc">MtLoInt</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">ConsLoInt</span> <span class="n">implemneets</span> <span class="nc">ILoInt</span> <span class="o">{</span>
    
    <span class="c1">// is this ILoInt the same as the given one?</span>
    <span class="kt">boolean</span> <span class="nf">sameLoInt</span><span class="o">(</span><span class="nc">ILoInt</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">that</span><span class="o">.</span><span class="na">sameCons</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kt">boolean</span> <span class="nf">sameCons</span><span class="o">(</span><span class="nc">ConsLoInt</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">==</span> <span class="n">that</span><span class="o">.</span><span class="na">first</span>
            <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">sameLoInt</span><span class="o">(</span><span class="n">that</span><span class="o">.</span><span class="na">rest</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kt">boolean</span> <span class="nf">sameMt</span><span class="o">(</span><span class="nc">MtLoInt</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

</code></pre></div></div>

<hr />
<p><strong>Exam 1</strong></p>

<p>Thursday the 25th</p>
<ul>
  <li>No lecture on the 25th</li>
</ul>

<p>3 hours long</p>

<p>Will be open on Canvas from 6pm-11:59pm</p>

<p>Cover material from Lecture 1-Lecture 12 inclusive</p>

<p>Sample exam will be on Piazza today</p>

<p>Review is part of lab on Tuesday</p>

<hr />

<h1 id="abstracting-over-behavior">Abstracting over Behavior</h1>

<p>Recall <code class="language-plaintext highlighter-rouge">getAllDaVinci()</code> in the paining example.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ILoPainting</span> <span class="o">{</span>
    <span class="c1">// get all the painting that were painted before 1900</span>
    <span class="nc">ILoPainting</span> <span class="nf">getAllBefore1900</span><span class="o">()</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MtLoPainting</span> <span class="kd">implements</span> <span class="nc">ILoPainting</span> <span class="o">{</span>
    <span class="nc">ILoPainting</span> <span class="nf">getAllBefore1900</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ConsLoPainting</span> <span class="kd">implements</span> <span class="nc">ILoPainting</span> <span class="o">{</span>

    <span class="nc">ILoPainting</span> <span class="nf">getAllDaVinci</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">.</span><span class="na">checkArtist</span><span class="o">(</span><span class="s">"DaVinci"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">getAllDaVinci</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">getAllDaVinci</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="nc">ILoPainting</span> <span class="nf">getAllBefore1900</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">.</span><span class="na">paintedBefore1900</span><span class="o">())</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">getAllBefore1900</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">getAllBefore1900</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Painting</span> <span class="o">{</span>

    <span class="nc">Artist</span> <span class="n">artist</span>
    <span class="nc">String</span> <span class="n">title</span>
    <span class="kt">double</span> <span class="n">value</span><span class="o">;</span> <span class="c1">// in millions of dollars</span>
    <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    <span class="c1">//...</span>
    
    <span class="kt">boolean</span> <span class="nf">paintedBefore1900</span><span class="o">()</span> <span class="o">{</span>
     <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">&lt;</span> <span class="mi">1900</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kt">boolean</span> <span class="nf">checkArtist</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">artist</span><span class="o">.</span><span class="na">checkName</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Artist</span> <span class="o">{</span>

    <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">yob</span><span class="o">;</span>
    <span class="c1">//...</span>
    <span class="kt">boolean</span> <span class="nf">checkName</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This looks like <strong>filter</strong>.</p>

<p>Recall from Fundies 1:</p>
<div class="language-scheme highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nf">filter</span> <span class="nv">even?</span> <span class="o">'</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span> <span class="c1">; returns '(2 4)</span>
<span class="p">(</span><span class="nf">filter</span> <span class="nv">odd?</span> <span class="o">'</span><span class="p">(</span><span class="nf">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span> <span class="c1">; returns '(1 3)</span>
</code></pre></div></div>

<p>We canâ€™t pass through the functions themselves, but we can pass <em>objects</em> which can hold functions:</p>

<p>These are called function objects</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">IPaintingPredicate</span> <span class="o">{</span>
    <span class="c1">// ask a question about a given painting</span>
    <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ByDaVinci</span> <span class="kd">implements</span> <span class="nc">IPaintingPredicate</span> <span class="o">{</span>
    <span class="c1">//is the given Painting by DaVinci?</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
       <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="na">artist</span><span class="o">.</span><span class="na">checkName</span><span class="o">(</span><span class="s">"DanVinci"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Before1900</span> <span class="kd">implements</span> <span class="nc">IPaintingPredicate</span> <span class="o">{</span>
    <span class="c1">//is the given Painting painted before 1900</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="na">year</span> <span class="o">&lt;</span> <span class="mi">1900</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//...</span>
<span class="kd">interface</span> <span class="nc">ILoPainting</span> <span class="o">{</span>
    <span class="c1">//...</span>
    <span class="c1">//filters this list of painting by the given predicate</span>
    <span class="nc">ILoPainting</span> <span class="nf">filter</span><span class="o">(</span><span class="nc">IPaintingPredicate</span> <span class="n">pred</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MtLoPainting</span> <span class="kd">implements</span> <span class="nc">ILoPainting</span> <span class="o">{</span>
    <span class="c1">//...</span>
    <span class="nc">ILoPainting</span> <span class="nf">filter</span><span class="o">(</span><span class="nc">IPaintingPredicate</span> <span class="n">pred</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span> 
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">ConsLoPainting</span> <span class="kd">implements</span> <span class="nc">ILoPainting</span> <span class="o">{</span>
    <span class="c1">//...</span>
    <span class="c1">//...</span>
    <span class="nc">ILoPainting</span> <span class="nf">filter</span><span class="o">(</span><span class="nc">IPaintingPredicate</span> <span class="n">pred</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span><span class="o">(</span><span class="n">pred</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">pred</span><span class="o">));</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">pred</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Examples</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">mt</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="k">new</span> <span class="nc">Before1900</span><span class="o">())</span> <span class="o">-&gt;</span> <span class="k">this</span><span class="o">.</span><span class="na">mt</span>
    <span class="k">this</span><span class="o">.</span><span class="na">list2</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="k">new</span> <span class="nc">ByDaVinci</span><span class="o">())</span> <span class="o">-&gt;</span> <span class="k">this</span><span class="o">.</span><span class="na">list1</span>
<span class="o">}</span>
</code></pre></div></div>

<p>If you want to add another way to filter something, youâ€™d just need to make a new class in the predicate interface (and create the <code class="language-plaintext highlighter-rouge">apply</code> method). For example:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Over50</span> <span class="kd">implements</span> <span class="nc">IPaintingPredicate</span> <span class="o">{</span>
    <span class="c1">//is the given painting values at more than 50 million dollars?</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="na">value</span> <span class="o">&gt;</span> <span class="mi">50</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h1 id="abstractions-over-multiple-arguments">Abstractions over Multiple Arguments</h1>

<h3 id="dot-product-example">Dot Product Example</h3>
<p>Dot product problem. For example, (1, 2, 3).dotProduct(5, 6) should return 5+12+0 = 17</p>

<p>Remember, by doing <code class="language-plaintext highlighter-rouge">double dynamic dispatch</code>, you know whether or not <code class="language-plaintext highlighter-rouge">that</code> is a <code class="language-plaintext highlighter-rouge">ConsLoInt</code> or <code class="language-plaintext highlighter-rouge">MtLoList</code> (because it runs to correct method).</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">ILoInt</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="nf">dotProduct</span><span class="o">(</span><span class="nc">ILoInt</span> <span class="n">that</span><span class="o">);</span>
    <span class="c1">//helper for dot product</span>
    <span class="kt">int</span> <span class="nf">dotProductHelp</span><span class="o">(</span><span class="kt">int</span> <span class="n">firstOfOriginalList</span><span class="o">,</span> <span class="nc">ILoInt</span> <span class="n">restOfOriginalList</span><span class="o">);</span> 
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">ConsLoInt</span> <span class="kd">implements</span> <span class="nc">ILoInt</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">first</span><span class="o">;</span>
    <span class="nc">ILoInt</span> <span class="n">rest</span><span class="o">;</span>
    
    <span class="nc">ConsLoInt</span><span class="o">(</span><span class="kt">int</span> <span class="n">f</span><span class="o">,</span> <span class="nc">ILoInt</span> <span class="n">r</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">=</span> <span class="n">f</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">rest</span> <span class="o">=</span> <span class="n">r</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">dotProduct</span><span class="o">(</span><span class="nc">ILoInt</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">that</span><span class="o">.</span><span class="na">dotProductHelp</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">dotProductHelp</span><span class="o">(</span><span class="kt">int</span> <span class="n">firstOfOriginalList</span><span class="o">,</span> <span class="nc">ILoInt</span> <span class="n">restOfOriginalList</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">*</span> <span class="n">firstOfOriginalList</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">dotProduct</span><span class="o">(</span><span class="n">restOfOriginalList</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MtLoInt</span> <span class="kd">implements</span> <span class="nc">ILoInt</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">dotProduct</span><span class="o">(</span><span class="nc">ILoInt</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">dotProductHelp</span><span class="o">(</span><span class="kt">int</span> <span class="n">firstOfOriginalList</span><span class="o">,</span> <span class="nc">ILoInt</span> <span class="n">restOfOriginalList</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Examples</span> <span class="o">{</span>
    <span class="nc">ILoInt</span> <span class="n">mt</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">MtLoInt</span><span class="o">();</span>
    
    <span class="nc">ILoInt</span> <span class="n">list1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConsLoInt</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ConsLoInt</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">mt</span><span class="o">));</span>
    <span class="nc">ILoInt</span> <span class="n">list2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConsLoInt</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ConsLoInt</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ConsLoInt</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">mt</span><span class="o">)));</span>
    
    <span class="kt">boolean</span> <span class="nf">testDot</span><span class="o">(</span><span class="nc">Tester</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="n">list1</span><span class="o">.</span><span class="na">dotProduct</span><span class="o">(</span><span class="n">list1</span><span class="o">),</span> <span class="mi">16</span><span class="o">+</span><span class="mi">25</span><span class="o">)</span>
          <span class="o">&amp;&amp;</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">list1</span><span class="o">.</span><span class="na">dotProduct</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">list2</span><span class="o">),</span> <span class="mi">4</span><span class="o">+</span><span class="mi">10</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="list-abstractions">List Abstractions</h2>
<p>Filter: [X -&gt; Boolean] [List-of X] -&gt; [List-of X]</p>

<p>Map: [X -&gt; Y] [List-of X] -&gt; [List-of Y]</p>

<p>Foldr: [X Y -&gt; Y] Y [List-of X] -&gt; Y</p>

<p>Andmap: [X -&gt; Boolean] [List-of X] -&gt; Boolean</p>

<p>Ormap: [X -&gt; Boolean] [List-of X] -&gt; Boolean</p>

<p>We canâ€™t make <code class="language-plaintext highlighter-rouge">Foldr</code> or <code class="language-plaintext highlighter-rouge">Map</code> yet because of the signature. They both return something with a <code class="language-plaintext highlighter-rouge">Y</code> which we donâ€™t know.</p>

<h3 id="filter---painting-example">Filter - Painting Example</h3>
<p>Recall <code class="language-plaintext highlighter-rouge">filter</code> from last lecture. We use function objects to make use of overriding.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">// In ConsLoPainting</span>
<span class="kd">public</span> <span class="nc">ILoPainting</span> <span class="nf">filter</span><span class="o">(</span><span class="nc">IPaintingPredicate</span> <span class="n">pred</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">pred</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="k">this</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">pred</span><span class="o">));</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">pred</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">//In IPaintingPredicate</span>
<span class="kd">class</span> <span class="nc">BySomeArtist</span> <span class="kd">implements</span> <span class="nc">IPaintingPredicate</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">artistName</span><span class="o">;</span>
    
    <span class="nc">BySomeArtist</span><span class="o">(</span><span class="nc">String</span> <span class="n">artistName</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">artistName</span> <span class="o">=</span> <span class="n">artistName</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">// Is the given painting painted by this.artistName?</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="na">checkArtistName</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">artistName</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">BeforeSomeYear</span> <span class="kd">implements</span> <span class="nc">IPaintingPredicate</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    
    <span class="nc">BeforeSomeYear</span><span class="o">(</span><span class="kt">int</span> <span class="n">year</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">=</span> <span class="n">year</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="na">year</span> <span class="o">&lt;</span> <span class="k">this</span><span class="o">.</span><span class="na">year</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="c1">// Example</span>
<span class="k">this</span><span class="o">.</span><span class="na">list3</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="k">new</span> <span class="nc">BySomeArtist</span><span class="o">(</span><span class="s">"Monet"</span><span class="o">))</span> <span class="c1">//return empty list</span>
</code></pre></div></div>

<h3 id="ormap">Ormap</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//in ILoPainting</span>

<span class="kt">boolean</span> <span class="nf">ormap</span><span class="o">(</span><span class="nc">IPaintingPredicate</span> <span class="n">pred</span><span class="o">);</span>

<span class="c1">//in mt class</span>

<span class="kt">boolean</span> <span class="nf">ormap</span><span class="o">(</span><span class="nc">IPaintingPredicate</span> <span class="n">pred</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// in cons class</span>

<span class="kt">boolean</span> <span class="nf">ormap</span><span class="o">(</span><span class="nc">IPaintingPredicate</span> <span class="n">pred</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">pred</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">)</span> <span class="o">||</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">ormap</span><span class="o">(</span><span class="n">pred</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<h3 id="andmap">Andmap</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//in ILoPainting</span>

<span class="kt">boolean</span> <span class="nf">ormap</span><span class="o">(</span><span class="nc">IPaintingPredicate</span> <span class="n">pred</span><span class="o">);</span>

<span class="c1">//in mt class</span>

<span class="kt">boolean</span> <span class="nf">ormap</span><span class="o">(</span><span class="nc">IPaintingPredicate</span> <span class="n">pred</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// in cons class</span>

<span class="kt">boolean</span> <span class="nf">ormap</span><span class="o">(</span><span class="nc">IPaintingPredicate</span> <span class="n">pred</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">pred</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">ormap</span><span class="o">(</span><span class="n">pred</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="higher-order-predicates">Higher Order Predicates</h3>

<p>A predicate that takes in another predicate</p>

<p>(Higher order in generalâ€“like <code class="language-plaintext highlighter-rouge">foldr</code>â€“means takes in another function )</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//in predicate</span>
<span class="kd">class</span> <span class="nc">AndPredicate</span> <span class="kd">implements</span> <span class="nc">IPaintingPredicate</span> <span class="o">{</span>
    <span class="nc">IPaintingPredicate</span> <span class="n">left</span><span class="o">;</span>
    <span class="nc">IPaintingPredicate</span> <span class="n">right</span><span class="o">;</span>
    
    <span class="nc">AndPredicate</span><span class="o">(</span><span class="nc">IPaintingPredicate</span> <span class="n">left</span><span class="o">,</span> <span class="nc">IPaintingPredicate</span> <span class="n">right</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">left</span> <span class="o">=</span> <span class="n">left</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">right</span> <span class="o">=</span> <span class="n">right</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="cm">/*
    * FIELDS:
    * this.left ... IPaintingPredicate
    * this.right ... IPaintingPredicate
    * METHODS:
    * this.apply(Painting) ... Boolean
    * METHODS FOR FIELDS: 
    * this.left.apply(Painting) ... Boolean
    * this.right.apply(Painting) ... Boolean
    */</span>
    
    <span class="c1">//does the painting pass both predicates?</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">left</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">p</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">right</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="n">p</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="c1">// in examples:</span>
<span class="k">this</span><span class="o">.</span><span class="na">list3</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="nc">AndPredicate</span><span class="o">(</span><span class="k">new</span> <span class="nc">BySomeArtist</span><span class="o">(</span><span class="s">"Monet"</span><span class="o">),</span> <span class="k">new</span> <span class="nc">BeforeSomeYear</span><span class="o">(</span><span class="mi">1900</span><span class="o">)));</span>
</code></pre></div></div>

<p>You can nest these as well because it is a <code class="language-plaintext highlighter-rouge">IPaintingPredicate</code>. You can also do the same thing with <code class="language-plaintext highlighter-rouge">or</code>. Note, we can use these predicates for sorting as well.</p>

<h1 id="abstracting-over-more-than-one-argument">Abstracting Over More Than One Argument</h1>

<p>Example of sorting by year (which looks very similar to sort by title):</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// In ILoPainting</span>

<span class="c1">// sort this list by year</span>
<span class="nc">ILoPainting</span> <span class="nf">sortByYear</span><span class="o">();</span>
<span class="c1">//insert the given painting into this sorted list (sorted by year)</span>
<span class="nc">ILoPainting</span> <span class="nf">insertByYear</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">);</span>

<span class="c1">// In MtLoPainting</span>

<span class="kd">public</span> <span class="nc">ILoPainting</span> <span class="nf">sortByYear</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="nc">ILoPainting</span> <span class="nf">insertByYear</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// In MtLoPainting</span>

<span class="kd">public</span> <span class="nc">ILoPainting</span> <span class="nf">sortByYear</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">sortByYear</span><span class="o">().</span><span class="na">insertByYear</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">year</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="nc">ILoPainting</span> <span class="nf">insertByYear</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">.</span><span class="na">yearComesBefore</span><span class="o">(</span><span class="n">p</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">insertByYear</span><span class="o">(</span><span class="n">p</span><span class="o">));</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>So we can abstract this using a <em>comparator</em> object:</p>

<p>NOTE: This isnâ€™t the same as a <em>predicate</em> object because they signatures are different. The predicateâ€™s signature is Painting -&gt; Boolean and the comparatorâ€™s signature is Painting Painting -&gt; Boolean (it takes in another Painting).</p>

<p>You do, however, have to delegate the actual comparison to the painting class</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">IPaintingComparator</span> <span class="o">{</span>
    <span class="c1">// does p1 come before p2?</span>
    <span class="kt">boolean</span> <span class="nf">compare</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p1</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">p2</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">CompareByYear</span> <span class="kd">implements</span> <span class="nc">IPaintingComparator</span> <span class="o">{</span>
    <span class="c1">// was p1 painted before p2?</span>
    <span class="kt">boolean</span> <span class="nf">compare</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p1</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">p2</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">p1</span><span class="o">.</span><span class="na">paintedBefore</span><span class="o">(</span><span class="n">p2</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">CompareByArtistName</span> <span class="kd">implements</span> <span class="nc">IPaintingComparator</span> <span class="o">{</span>
    <span class="c1">// does p1's artist name come before p2's artist name alphabetically</span>
    <span class="kt">boolean</span> <span class="nf">compare</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p1</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">p2</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">p1</span><span class="o">.</span><span class="na">nameComesBefore</span><span class="o">(</span><span class="n">p2</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>We also create this <code class="language-plaintext highlighter-rouge">compare</code> method in our Painting class.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in Painting class</span>
<span class="kt">boolean</span> <span class="nf">paintedBefore</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">&lt;</span> <span class="n">p</span><span class="o">.</span><span class="na">year</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>And the abstracted <code class="language-plaintext highlighter-rouge">sort</code> method looks like:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// In ILoPainting</span>
<span class="c1">//sort this list of painting by the given comparison operator</span>
<span class="nc">ILoPainting</span> <span class="nf">sortBy</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">);</span>
<span class="c1">// inserts into the sorted list</span>
<span class="nc">ILoPainting</span> <span class="nf">insertBy</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">p</span><span class="o">);</span>

<span class="c1">// In MtLoPainting class</span>
<span class="c1">//sort this list of painting by the given comparison operator</span>
<span class="nc">ILoPainting</span> <span class="nf">sortBy</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// inserts into the sorted list</span>
<span class="nc">ILoPainting</span> <span class="nf">insertBy</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// In ConsLoPainting class</span>
<span class="c1">//sort this list of painting by the given comparison operator</span>
<span class="nc">ILoPainting</span> <span class="nf">sortBy</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">sortBy</span><span class="o">(</span><span class="n">comp</span><span class="o">).</span><span class="na">insertBy</span><span class="o">(</span><span class="n">comp</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// inserts into the sorted list</span>
<span class="nc">ILoPainting</span> <span class="nf">insertBy</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">comp</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="n">p</span><span class="o">))</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">insertBy</span><span class="o">(</span><span class="n">comp</span><span class="o">,</span> <span class="n">p</span><span class="o">));</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>What if we want it to be a three value comparator (is this before that, after that, or the same as that)?</p>
<ul>
  <li>Returns a negative int if it comes before</li>
  <li>Zero if itâ€™s equal</li>
  <li>Positive if it comes after</li>
</ul>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in PaintingComparator</span>

<span class="c1">// returns a negative int if p1 comes before p2,</span>
<span class="c1">// a positive int if p1 comes after p2,</span>
<span class="c1">// or zero if p1 is the same as p2</span>
<span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p1</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">p2</span><span class="o">);</span>

<span class="c1">// in Painting</span>
<span class="kt">int</span> <span class="nf">paintedBefore</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">-</span> <span class="n">p</span><span class="o">.</span><span class="na">year</span><span class="o">;</span>
<span class="o">}</span>

<span class="kt">int</span> <span class="nf">nameComesBefore</span><span class="o">(</span><span class="nc">Artist</span> <span class="n">that</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">that</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// in ConsLoPainting</span>
<span class="kd">public</span> <span class="nc">ILoPainting</span> <span class="nf">insertBy</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">comp</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="n">p</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">insertBy</span><span class="o">(</span><span class="n">comp</span><span class="o">,</span> <span class="n">p</span><span class="o">));</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">ConsLoPainting</span><span class="o">(</span><span class="n">p</span><span class="o">,</span> <span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="example---gets-the-min-painting-in-an-list">Example - Gets the Min Painting in an List</h3>
<p>Getting the most expensive/least expensive/earliest painted Painting</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// in IPainting </span>

<span class="c1">// Gets the min painting based on the given comparator</span>
<span class="nc">Painting</span> <span class="nf">findMin</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">);</span>

<span class="c1">// Gets the min painting</span>
<span class="c1">// Accumulator: keeps track of the min painting so far</span>
<span class="nc">Painting</span> <span class="nf">findMinAcc</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">acc</span><span class="o">);</span>

<span class="c1">// in MtLoPainting</span>

<span class="c1">// Gets the min painting based on the given comparator</span>
<span class="kd">public</span> <span class="nc">Painting</span> <span class="nf">findMin</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">RunTimeException</span><span class="o">(</span><span class="s">"No min painting in empty list"</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// Gets the min painting</span>
<span class="c1">// Accumulator: keeps track of the min painting so far</span>
<span class="nc">Painting</span> <span class="nf">findMinAcc</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">acc</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">acc</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// in ConsLoPainting</span>

<span class="c1">// Gets the min painting based on the given comparator</span>
<span class="kd">public</span> <span class="nc">Painting</span> <span class="nf">findMin</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">findMinAcc</span><span class="o">(</span><span class="n">comp</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">);</span>
<span class="o">}</span>

<span class="c1">// Gets the min painting</span>
<span class="c1">// Accumulator: keeps track of the min painting so far</span>
<span class="nc">Painting</span> <span class="nf">findMinAcc</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">acc</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">comp</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="n">acc</span><span class="o">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">findMinAcc</span><span class="o">(</span><span class="n">comp</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">findMinAcc</span><span class="o">(</span><span class="n">comp</span><span class="o">,</span> <span class="n">acc</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="higher-order-comparator">Higher Order Comparator</h3>

<p>A comparator that takes in another comparator</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">ReverseComparator</span> <span class="kd">implements</span> <span class="nc">IPaintingComparator</span> <span class="o">{</span>
    <span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">;</span>
    
    <span class="nc">ReverseComparator</span><span class="o">(</span><span class="nc">IPaintingComparator</span> <span class="n">comp</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">comp</span> <span class="o">=</span> <span class="n">comp</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">// does p2 come before p2 according to the reverse of this.comp?</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p1</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">p2</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">comp</span><span class="o">.</span><span class="na">compare</span><span class="o">(</span><span class="n">p1</span><span class="o">,</span> <span class="n">p2</span><span class="o">)</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h1 id="abstracting-over-types">Abstracting Over Types</h1>

<p>IPaintingPredicate</p>

<p>boolean apply(Painting P)</p>

<p>IBookPredicate</p>

<p>boolean apply(Book P)</p>

<p>These are similar. Can we abstract away these differences (only difference is what they take in)?</p>

<p>We can take in a <strong>generic type</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">IPred</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="no">T</span> <span class="n">t</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Example:</strong></p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">ByArtist</span> <span class="kd">implements</span> <span class="nc">IPred</span><span class="o">&lt;</span><span class="nc">Painting</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    
    <span class="nc">ByArtist</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">// is the given painting painted by this.name?</span>
    <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ByAuthor</span> <span class="kd">implements</span> <span class="nc">IPred</span><span class="o">&lt;</span><span class="nc">Book</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    
    <span class="nc">ByAuthor</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">// is the given painting painted by this.name?</span>
    <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">Book</span> <span class="n">b</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">b</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="generic-list">Generic List</h3>

<p>We can have one IList interface which can be a list of whatever you want. The downsides to this is that you canâ€™t have specific methods (such as <code class="language-plaintext highlighter-rouge">totalSumOfBooks</code>). Cannot refer to anything specific about <code class="language-plaintext highlighter-rouge">T</code>. But this is where List Abstractions are helpful.</p>

<p>Filter: [x-&gt; Boolean] [List-of X] -&gt; [List-of X]</p>

<p>Map: [X-&gt;Y] [List-of X] -&gt; [List-of Y]</p>

<p>Fold: [X Y -&gt; Y] Y [List-of X] -&gt; Y</p>

<p>NOTE: If we havenâ€™t seen a type before, we need to say <X> before the function. See `map`.</X></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="c1">//filters this list by the given predicate</span>
    <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">filter</span><span class="o">(</span><span class="nc">IPred</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">pred</span><span class="o">);</span>
    
    <span class="c1">//map a function onto the members of this list</span>
    <span class="o">&lt;</span><span class="no">U</span><span class="o">&gt;</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">U</span><span class="o">&gt;</span> <span class="nf">map</span><span class="o">(</span><span class="nc">IFunc</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">U</span><span class="o">&gt;</span> <span class="n">f</span><span class="o">);</span> 
    
    <span class="c1">// combine the items in this list according to the given function</span>
    <span class="c1">// foldr</span>
    <span class="o">&lt;</span><span class="no">U</span><span class="o">&gt;</span> <span class="no">U</span> <span class="nf">fold</span><span class="o">(</span><span class="nc">IFunc2</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">U</span><span class="o">,</span> <span class="no">U</span><span class="o">&gt;</span> <span class="n">f</span><span class="o">,</span> <span class="no">U</span> <span class="n">base</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MtList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    
    <span class="c1">//filters this list by the given predicate</span>
    <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">filter</span><span class="o">(</span><span class="nc">IPred</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">pred</span><span class="o">){</span>
        <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">//map a function onto the members of this list</span>
    <span class="kd">public</span> <span class="o">&lt;</span><span class="no">U</span><span class="o">&gt;</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">U</span><span class="o">&gt;</span> <span class="nf">map</span><span class="o">(</span><span class="nc">IFunc</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">U</span><span class="o">&gt;</span> <span class="n">f</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nc">MtList</span><span class="o">&lt;</span><span class="no">U</span><span class="o">&gt;();</span>
    <span class="o">}</span>
    
    <span class="c1">// combine the items in this list according to the given function</span>
    <span class="kd">public</span> <span class="o">&lt;</span><span class="no">U</span><span class="o">&gt;</span> <span class="no">U</span> <span class="nf">fold</span><span class="o">(</span><span class="nc">IFunc2</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">U</span><span class="o">,</span> <span class="no">U</span><span class="o">&gt;</span> <span class="n">f</span><span class="o">,</span> <span class="no">U</span> <span class="n">base</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">base</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ConsList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="no">T</span> <span class="n">first</span><span class="o">;</span>
    <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">rest</span><span class="o">;</span>
    
    <span class="nc">ConsList</span><span class="o">(</span><span class="no">T</span> <span class="n">first</span><span class="o">,</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">rest</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">rest</span> <span class="o">=</span> <span class="n">rest</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">//filters this list by the given predicate</span>
    <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">filter</span><span class="o">(</span><span class="nc">IPred</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">pred</span><span class="o">){</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">pred</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nc">ConsList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">pred</span><span class="o">));</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">pred</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="c1">//map a function onto the members of this list</span>
    <span class="kd">public</span> <span class="o">&lt;</span><span class="no">U</span><span class="o">&gt;</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">U</span><span class="o">&gt;</span> <span class="nf">map</span><span class="o">(</span><span class="nc">IFunc</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">U</span><span class="o">&gt;</span> <span class="n">f</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nc">ConsList</span><span class="o">&lt;</span><span class="no">U</span><span class="o">&gt;(</span><span class="n">f</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">),</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">f</span><span class="o">));</span>
    <span class="o">}</span>
    
    <span class="c1">// combine the items in this list according to the given function</span>
    <span class="kd">public</span> <span class="o">&lt;</span><span class="no">U</span><span class="o">&gt;</span> <span class="no">U</span> <span class="nf">fold</span><span class="o">(</span><span class="nc">IFunc2</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">U</span><span class="o">,</span> <span class="no">U</span><span class="o">&gt;</span> <span class="n">f</span><span class="o">,</span> <span class="no">U</span> <span class="n">base</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="na">apply</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">fold</span><span class="o">(</span><span class="n">f</span><span class="o">,</span> <span class="n">base</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">IPred</span><span class="o">&lt;</span><span class="no">X</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="c1">//asks a question about the given x</span>
    <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="no">X</span> <span class="n">x</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ByAuthor</span> <span class="kd">implements</span> <span class="nc">IPred</span><span class="o">&lt;</span><span class="nc">Painting</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    
    <span class="nc">ByAuthor</span><span class="o">(</span><span class="nc">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="na">checkArtistName</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">);</span> 
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">IFunc</span><span class="o">&lt;</span><span class="no">X</span><span class="o">,</span> <span class="no">Y</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="c1">//apply an operation to x and produce a y</span>
    <span class="no">Y</span> <span class="nf">apply</span><span class="o">(</span><span class="no">X</span> <span class="n">x</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">IFunc2</span><span class="o">&lt;</span><span class="no">X</span><span class="o">,</span> <span class="no">Y</span><span class="o">,</span> <span class="no">Z</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="c1">//apply some operation to x and y to produce a Z</span>
    <span class="no">Z</span> <span class="nf">apply</span><span class="o">(</span><span class="no">X</span> <span class="n">x</span><span class="o">,</span> <span class="no">Y</span> <span class="n">y</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">SumValues</span> <span class="kd">implements</span> <span class="nc">IFunc2</span><span class="o">&lt;</span><span class="nc">Painting</span><span class="o">,</span> <span class="nc">Double</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="o">{</span>
    
    <span class="kd">public</span> <span class="nc">Double</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">x</span><span class="o">,</span> <span class="nc">Integer</span> <span class="n">y</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">p</span><span class="o">.</span><span class="na">value</span> <span class="o">+</span> <span class="n">y</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">PaintingToArtist</span> <span class="kd">implements</span> <span class="nc">IFunc</span><span class="o">&lt;</span><span class="nc">Painting</span><span class="o">,</span> <span class="nc">Artist</span><span class="o">&gt;</span> <span class="o">{</span>
    
    <span class="c1">// gets the artist of a given painting</span>
    <span class="kd">public</span> <span class="nc">Artist</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="na">artist</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">Examples</span> <span class="o">{</span>
    <span class="o">...</span>
    <span class="nc">Painting</span> <span class="n">waterlilies</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Painting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">monet</span><span class="o">,</span> <span class="s">"Water Lilies"</span><span class="o">,</span> <span class="mi">20</span><span class="o">,</span> <span class="mi">1915</span><span class="o">);</span>
    
    <span class="nc">IList</span><span class="o">&lt;</span><span class="nc">Painting</span><span class="o">&gt;</span> <span class="n">paintings</span>  <span class="o">=</span> <span class="k">new</span> <span class="nc">ConsList</span><span class="o">&lt;</span><span class="nc">Painting</span><span class="o">&gt;(</span><span class="k">this</span><span class="o">.</span><span class="na">waterlilies</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MtList</span><span class="o">&lt;</span><span class="nc">Painting</span><span class="o">&gt;);</span>
    
    <span class="kt">boolean</span> <span class="nf">testFilter</span><span class="o">(</span><span class="nc">Tester</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">paintings</span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="k">new</span> <span class="nc">ByAuthor</span><span class="o">(</span><span class="s">"Monet"</span><span class="o">)),</span> <span class="k">this</span><span class="o">.</span><span class="na">paintings</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kt">boolean</span> <span class="nf">testMap</span><span class="o">(</span><span class="nc">Tester</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">paintings</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="k">new</span> <span class="nc">PaintingToArtist</span><span class="o">()),</span>
                            <span class="k">new</span> <span class="nc">ConsList</span><span class="o">&lt;</span><span class="nc">Artist</span><span class="o">&gt;(</span><span class="k">this</span><span class="o">.</span><span class="na">monet</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MtList</span><span class="o">&lt;</span><span class="nc">Artist</span><span class="o">&gt;))</span>
                    <span class="o">&amp;&amp;</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">new</span> <span class="nc">MtList</span><span class="o">&lt;</span><span class="nc">Painting</span><span class="o">&gt;().</span><span class="na">map</span><span class="o">(</span><span class="k">new</span> <span class="nc">PaintingToArtist</span><span class="o">()),</span>
                            <span class="k">new</span> <span class="nc">MtList</span><span class="o">&lt;</span><span class="nc">Artist</span><span class="o">&gt;());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="javas-own-implementation">Javaâ€™s Own Implementation</h3>

<p>Import utils for Java</p>

<p><strong>java.util.function</strong>
Predicate</p>
<ul>
  <li>Instead of <code class="language-plaintext highlighter-rouge">apply</code>, it has the method <code class="language-plaintext highlighter-rouge">test</code></li>
</ul>

<p>Function</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">apply</code> method</li>
</ul>

<p>BiFunction</p>
<ul>
  <li>The same as <code class="language-plaintext highlighter-rouge">Func2</code></li>
  <li><code class="language-plaintext highlighter-rouge">apply</code> method</li>
</ul>

<p><strong>java.util.</strong></p>

<p>Comparator</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">compare</code> method</li>
</ul>

<p>See official Java documentation for more information.</p>

<h1 id="visitors">Visitors</h1>

<p>Recall <em>Generic Lists</em> from last lecture</p>

<p>NOTE: You can implement multiple interfaces in a single class</p>

<div style="width: 100%" class="ui rounded images">
<img class="ui image" src="./cs2510/lec16-fig1.png" />
</div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">...</span>

<span class="kd">interface</span> <span class="nc">IShape</span> <span class="o">{</span>
    
    <span class="c1">// produces a Double when this IShape is apply to by the given function</span>
    <span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="no">R</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">IShapeVisitor</span><span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="n">f</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Circle</span> <span class="kd">implements</span> <span class="nc">IShape</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">radius</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">color</span><span class="o">;</span>
    
    <span class="nc">Circle</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">,</span> <span class="kt">int</span> <span class="n">radius</span><span class="o">,</span> <span class="nc">String</span> <span class="n">color</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">radius</span> <span class="o">=</span> <span class="n">radius</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">color</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">// produces a Double when this Circle is apply to by the given function</span>
    <span class="kd">public</span> <span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="no">R</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">IShapeVisitor</span><span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="n">f</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="na">applyToCircle</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Rect</span> <span class="kd">implements</span> <span class="nc">IShape</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="n">y</span><span class="o">,</span> <span class="n">w</span><span class="o">,</span> <span class="n">h</span><span class="o">;</span>
    <span class="nc">String</span> <span class="n">color</span><span class="o">;</span>
    
    <span class="nc">Rect</span><span class="o">(</span><span class="kt">int</span> <span class="n">x</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">,</span> <span class="kt">int</span> <span class="n">w</span><span class="o">,</span> <span class="kt">int</span> <span class="n">h</span><span class="o">,</span> <span class="nc">String</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">y</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">w</span> <span class="o">=</span> <span class="n">w</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">h</span> <span class="o">=</span> <span class="n">h</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">color</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">// produces a Double when this Rect is apply to by the given function</span>
    <span class="kd">public</span> <span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="no">R</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">IShapeVisitor</span><span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="n">f</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">f</span><span class="o">.</span><span class="na">applyToRect</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// We can say this `extends IFunc&lt;IShape, R&gt;` if we want every</span>
<span class="c1">// IShapeVisitor to be an IFunc</span>
<span class="kd">interface</span> <span class="nc">IShapeVisitor</span><span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="no">R</span> <span class="nf">visitCircle</span><span class="o">(</span><span class="nc">Circle</span> <span class="n">c</span><span class="o">);</span>
    <span class="no">R</span> <span class="nf">visitRect</span><span class="o">(</span><span class="nc">Rect</span> <span class="n">r</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">// a function to compute the area of an IShape</span>
<span class="kd">class</span> <span class="nc">ShapeArea</span> <span class="kd">implements</span> <span class="nc">IShapeVisitor</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;{</span>
    
    <span class="c1">// compute the area of a Circle</span>
    <span class="kd">public</span> <span class="nc">Double</span> <span class="nf">visitCircle</span><span class="o">(</span><span class="nc">Circle</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">Math</span><span class="o">.</span><span class="na">PI</span> <span class="o">*</span> <span class="n">c</span><span class="o">.</span><span class="na">radius</span> <span class="o">*</span> <span class="n">c</span><span class="o">.</span><span class="na">radius</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">// compute the area of a Rect </span>
    <span class="kd">public</span> <span class="nc">Double</span> <span class="nf">visitRect</span><span class="o">(</span><span class="nc">Rect</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="na">h</span> <span class="o">*</span> <span class="n">r</span><span class="o">.</span><span class="na">w</span> <span class="o">*</span> <span class="mf">1.0</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">// apply a function to the given shape</span>
    <span class="kd">public</span> <span class="nc">Double</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">IShape</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// NOTE: We could also just have every IShapeVisitor is an IFunc</span>
<span class="kd">class</span> <span class="nc">ShapeGrow</span> <span class="kd">implements</span> <span class="nc">IShapeVisitor</span><span class="o">&lt;</span><span class="nc">Shape</span><span class="o">&gt;,</span> <span class="nc">IFunc</span><span class="o">&lt;</span><span class="nc">IShape</span><span class="o">,</span> <span class="nc">Double</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">increment</span><span class="o">;</span>
    
    <span class="nc">ShapeGrow</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">increment</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="nc">IShape</span> <span class="nf">visitCircle</span><span class="o">(</span><span class="nc">Circle</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Circle</span><span class="o">(</span><span class="n">c</span><span class="o">.</span><span class="na">x</span><span class="o">,</span> <span class="n">c</span><span class="o">.</span><span class="na">y</span><span class="o">,</span> <span class="n">c</span><span class="o">.</span><span class="na">radius</span> <span class="o">+</span> <span class="k">this</span><span class="o">.</span><span class="na">increment</span><span class="o">,</span> <span class="n">c</span><span class="o">.</span><span class="na">color</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="nc">IShape</span> <span class="nf">visitRect</span><span class="o">(</span><span class="nc">Rect</span> <span class="n">r</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Rect</span><span class="o">(</span><span class="n">r</span><span class="o">.</span><span class="na">x</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">y</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">w</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">h</span><span class="o">,</span> <span class="n">r</span><span class="o">.</span><span class="na">color</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="c1">// apply a function to the given shape</span>
    <span class="kd">public</span> <span class="nc">Double</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">IShape</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>


<span class="kd">class</span> <span class="nc">Examples</span> <span class="o">{</span>
    <span class="nc">IShape</span> <span class="n">c1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Circle</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">10</span><span class="o">,</span> <span class="s">"red"</span><span class="o">);</span>
    <span class="nc">IShape</span> <span class="n">r1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(</span><span class="mi">6</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">3</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="s">"blue"</span><span class="o">);</span>
    
    <span class="nc">IList</span><span class="o">&lt;</span><span class="nc">IShape</span><span class="o">&gt;</span> <span class="n">shapes</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConsList</span><span class="o">&lt;</span><span class="nc">IShape</span><span class="o">&gt;(</span><span class="k">this</span><span class="o">.</span><span class="na">c1</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ConsList</span><span class="o">&lt;</span><span class="nc">IShape</span><span class="o">&gt;(</span><span class="k">this</span><span class="o">.</span><span class="na">r1</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MtList</span><span class="o">&lt;</span><span class="nc">IShape</span><span class="o">&gt;()));</span>
    
    <span class="kt">boolean</span> <span class="nf">testShapeAreas</span><span class="o">(</span><span class="nc">Tester</span> <span class="n">t</span><span class="o">){</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">shapes</span><span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="k">new</span> <span class="n">shapeArea</span><span class="o">()),</span> 
            <span class="k">new</span> <span class="nc">ConsList</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;(</span><span class="nc">Math</span><span class="o">.</span><span class="na">PI</span> <span class="o">*</span> <span class="mi">100</span><span class="o">,</span> <span class="k">new</span> <span class="nc">ConsList</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;(</span><span class="mf">6.0</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MtList</span><span class="o">&lt;</span><span class="nc">Double</span><span class="o">&gt;())));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>What about the visitors for <code class="language-plaintext highlighter-rouge">IList</code>s?</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">java.util.Function</span><span class="o">;</span>

<span class="kd">interface</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="no">R</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">IListVisitor</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">R</span><span class="o">&gt;</span> <span class="n">ilv</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MtList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="no">R</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">IListVisitor</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">R</span><span class="o">&gt;</span> <span class="n">ilv</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">ilv</span><span class="o">.</span><span class="na">visitMt</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ConsList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="no">T</span> <span class="n">first</span><span class="o">;</span>
  <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">rest</span><span class="o">;</span>
  
  <span class="nc">ConsList</span><span class="o">(</span><span class="no">T</span> <span class="n">first</span><span class="o">,</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">rest</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">first</span> <span class="o">=</span> <span class="n">first</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">rest</span> <span class="o">=</span> <span class="n">rest</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="o">&lt;</span><span class="no">R</span><span class="o">&gt;</span> <span class="no">R</span> <span class="nf">accept</span><span class="o">(</span><span class="nc">IListVisitor</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">R</span><span class="o">&gt;</span> <span class="n">ilv</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">ilv</span><span class="o">.</span><span class="na">visitCons</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
  <span class="o">}</span>

  
<span class="o">}</span>

<span class="kd">interface</span> <span class="nc">IListVisitor</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="no">R</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="no">R</span> <span class="nf">visitMt</span><span class="o">(</span><span class="nc">MtList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">mt</span><span class="o">);</span>
  <span class="no">R</span> <span class="nf">visitCons</span><span class="o">(</span><span class="nc">ConsList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">cons</span><span class="o">);</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">FilterVisitor</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="nc">IListVisitor</span><span class="o">&lt;</span><span class="no">T</span><span class="o">,</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;&gt;</span> <span class="o">{</span>
    <span class="nc">Predicate</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">pred</span><span class="o">;</span>
    
    <span class="nc">FilterVisitor</span><span class="o">(</span><span class="nc">Predicate</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">pred</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">pred</span> <span class="o">=</span> <span class="n">pred</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">visitMt</span><span class="o">(</span><span class="nc">MtList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">mt</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">mt</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="c1">// asks a question about the first item in the cons, recurs on the rest</span>
    <span class="kd">public</span> <span class="nc">IList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="nf">visitCons</span><span class="o">(</span><span class="nc">ConsList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="n">cons</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">pred</span><span class="o">.</span><span class="na">test</span><span class="o">(</span><span class="n">cons</span><span class="o">.</span><span class="na">first</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">new</span> <span class="nc">ConsList</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;(</span><span class="n">cons</span><span class="o">.</span><span class="na">first</span><span class="o">,</span> <span class="n">cons</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="k">this</span><span class="o">));</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">rest</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">ContainsA</span> <span class="kd">implements</span> <span class="nc">Predicate</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="o">{</span>
    
    <span class="c1">// does the string contain the letter a?</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">test</span><span class="o">(</span><span class="nc">String</span> <span class="n">x</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">x</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"a"</span><span class="o">)</span> <span class="o">||</span> <span class="n">x</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"A"</span><span class="o">);</span>
    <span class="o">}</span>
    
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Examples</span> <span class="o">{</span>
    <span class="c1">// Strings2 = ["dog", "cat"]</span>
    <span class="c1">// Strings1 = ["cat"]</span>

    <span class="kt">boolean</span> <span class="nf">testFilter</span><span class="o">(</span><span class="nc">Tester</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">strings2</span><span class="o">.</span><span class="na">accept</span><span class="o">(</span><span class="k">new</span> <span class="nc">FilterVisitor</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;(</span><span class="k">new</span> <span class="nc">ContainsA</span><span class="o">())),</span> <span class="k">this</span><span class="o">.</span><span class="na">strings1</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h1 id="mutation">Mutation</h1>

<p>Consider:</p>

<div style="width: 100%" class="ui rounded images">
<img class="ui image" src="./cs2510/lec17-fig1.png" />
</div>

<p>This doesnâ€™t work because this is <em>circular data</em>. How can we make an example of this?</p>

<p>What we want is:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">monet</span><span class="o">.</span><span class="na">painting</span><span class="o">.</span><span class="na">artist</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">monet</span><span class="o">);</span>
</code></pre></div></div>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Artist</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">yob</span><span class="o">;</span>
    <span class="nc">Painting</span> <span class="n">painting</span><span class="o">;</span>
    
    <span class="nc">Artist</span><span class="o">(</span><span class="nc">String</span> <span class="n">n</span><span class="o">,</span> <span class="kt">int</span> <span class="n">yob</span><span class="o">,</span> <span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">n</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">yob</span> <span class="o">=</span> <span class="n">yob</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">painting</span> <span class="o">=</span> <span class="n">p</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Painting</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">title</span><span class="o">;</span>
    <span class="nc">Artist</span> <span class="n">artist</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">year</span><span class="o">;</span>
    <span class="kt">int</span> <span class="n">value</span><span class="o">;</span>
    
    <span class="nc">Painting</span><span class="o">(</span><span class="nc">String</span> <span class="n">t</span><span class="o">,</span> <span class="nc">Artist</span> <span class="n">a</span><span class="o">,</span> <span class="kt">int</span> <span class="n">y</span><span class="o">,</span> <span class="kt">int</span> <span class="n">v</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">artist</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">=</span> <span class="n">y</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">=</span> <span class="n">v</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>In order to do this, we need to start with incomplete objects:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="o">.</span><span class="na">monet</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Artist</span><span class="o">(</span><span class="s">"Claude Monet"</span><span class="o">,</span> <span class="mi">1840</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
<span class="k">this</span><span class="o">.</span><span class="na">waterlilies</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Painting</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">monet</span><span class="o">,</span> <span class="s">"Waterlilies"</span><span class="o">,</span> <span class="mi">30</span><span class="o">,</span> <span class="mi">1915</span><span class="o">);</span>

<span class="c1">// Assignment statement</span>
<span class="k">this</span><span class="o">.</span><span class="na">monet</span><span class="o">.</span><span class="na">painting</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">waterlilies</span><span class="o">;</span>
</code></pre></div></div>
<p>This represents:</p>

<div style="width: 100%" class="ui rounded images">
<img class="ui image" src="./cs2510/lec17-fig2.png" />
</div>

<p>The side effect is that The <code class="language-plaintext highlighter-rouge">Artist</code>s <code class="language-plaintext highlighter-rouge">painting</code> value is changed from <code class="language-plaintext highlighter-rouge">null</code> to <code class="language-plaintext highlighter-rouge">waterlilies</code>.</p>

<p>Now what about checking for sameness? Because we introduced <em>circularity</em> in our data, we have to make sure that our methods terminate.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">// In Painting class</span>

<span class="kt">boolean</span> <span class="nf">samePainting</span><span class="o">(</span><span class="nc">Painting</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">artist</span><span class="o">.</span><span class="na">sameArtist</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">artist</span><span class="o">)</span> 
        <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">title</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">title</span><span class="o">)</span>
        <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">value</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="na">value</span>
        <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">year</span> <span class="o">==</span> <span class="n">p</span><span class="o">.</span><span class="na">year</span><span class="o">;</span>
<span class="o">}</span>

<span class="c1">// In Artist class</span>

<span class="kt">boolean</span> <span class="nf">sameArtist</span><span class="o">(</span><span class="nc">Artist</span> <span class="n">other</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">other</span><span class="o">.</span><span class="na">name</span><span class="o">)</span> 
        <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="o">.</span><span class="na">yob</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="na">yob</span><span class="o">;</span> 
        <span class="c1">// We don't include the next line because it introduces circularity</span>
        <span class="c1">//&amp;&amp; this.painting.samePainting(other.painting);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Another example (to show how complicated this can get):</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">class</span> <span class="nc">Counter</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">val</span><span class="o">;</span>
  <span class="nc">Counter</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="nc">Counter</span><span class="o">(</span><span class="kt">int</span> <span class="n">initialVal</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">val</span> <span class="o">=</span> <span class="n">initialVal</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="kt">int</span> <span class="nf">get</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">val</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">val</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">val</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">ans</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
<span class="kd">class</span> <span class="nc">ExamplesCounter</span> <span class="o">{</span>
  <span class="kt">boolean</span> <span class="nf">testCounter</span><span class="o">(</span><span class="nc">Tester</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Counter</span> <span class="n">c1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Counter</span><span class="o">();</span>
    <span class="nc">Counter</span> <span class="n">c2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Counter</span><span class="o">(</span><span class="mi">2</span><span class="o">);</span>
    <span class="c1">// What should these tests be?</span>
    <span class="k">return</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="n">c1</span><span class="o">.</span><span class="na">get</span><span class="o">(),</span> <span class="mi">0</span><span class="o">)</span><span class="c1">// Test 1</span>
        <span class="o">&amp;&amp;</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="n">c2</span><span class="o">.</span><span class="na">get</span><span class="o">(),</span> <span class="mi">2</span><span class="o">)</span><span class="c1">// Test 2</span>
        <span class="o">&amp;&amp;</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="n">c1</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="o">==</span> <span class="n">c1</span><span class="o">.</span><span class="na">get</span><span class="o">(),</span> <span class="kc">false</span><span class="o">)</span><span class="c1">// Test 3</span>
        <span class="o">&amp;&amp;</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="n">c2</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="o">==</span> <span class="n">c1</span><span class="o">.</span><span class="na">get</span><span class="o">(),</span> <span class="kc">true</span><span class="o">)</span><span class="c1">// Test 4</span>
        <span class="o">&amp;&amp;</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="n">c2</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="o">==</span> <span class="n">c1</span><span class="o">.</span><span class="na">get</span><span class="o">(),</span> <span class="kc">true</span><span class="o">)</span>  <span class="c1">// Test 5</span>
        <span class="o">&amp;&amp;</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="n">c1</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="o">==</span> <span class="n">c1</span><span class="o">.</span><span class="na">get</span><span class="o">(),</span> <span class="kc">false</span><span class="o">)</span>  <span class="c1">// Test 6</span>
        <span class="o">&amp;&amp;</span> <span class="n">t</span><span class="o">.</span><span class="na">checkExpect</span><span class="o">(</span><span class="n">c2</span><span class="o">.</span><span class="na">get</span><span class="o">()</span> <span class="o">==</span> <span class="n">c1</span><span class="o">.</span><span class="na">get</span><span class="o">(),</span> <span class="kc">false</span><span class="o">)</span><span class="c1">// Test 7</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>
:ET